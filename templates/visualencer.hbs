{{!-- ========== PARTIALS COMUNES ========== --}}

{{#*inline "v-fade-direction"}}
  <div class="v-field">
    <label>{{label}} dur
      <input type="number"
             data-config="{{durKey}}"
             data-type="number"
             value="{{lookup config durKey}}">
    </label>
  </div>
  <div class="v-field">
<label>Ease<select data-config="ease">
                    <option value="linear"           {{#if (eq node.config.ease "linear")}}selected{{/if}}>linear</option>
                    <option value="easeInSine"       {{#if (eq node.config.ease "easeInSine")}}selected{{/if}}>easeInSine</option>
                    <option value="easeOutSine"      {{#if (eq node.config.ease "easeOutSine")}}selected{{/if}}>easeOutSine</option>
                    <option value="easeInOutSine"    {{#if (eq node.config.ease "easeInOutSine")}}selected{{/if}}>easeInOutSine</option>
                    <option value="easeInQuad"       {{#if (eq node.config.ease "easeInQuad")}}selected{{/if}}>easeInQuad</option>
                    <option value="easeOutQuad"      {{#if (eq node.config.ease "easeOutQuad")}}selected{{/if}}>easeOutQuad</option>
                    <option value="easeInOutQuad"    {{#if (eq node.config.ease "easeInOutQuad")}}selected{{/if}}>easeInOutQuad</option>
                    <option value="easeInCubic"      {{#if (eq node.config.ease "easeInCubic")}}selected{{/if}}>easeInCubic</option>
                    <option value="easeOutCubic"     {{#if (eq node.config.ease "easeOutCubic")}}selected{{/if}}>easeOutCubic</option>
                    <option value="easeInOutCubic"   {{#if (eq node.config.ease "easeInOutCubic")}}selected{{/if}}>easeInOutCubic</option>
                    <option value="easeInQuart"      {{#if (eq node.config.ease "easeInQuart")}}selected{{/if}}>easeInQuart</option>
                    <option value="easeOutQuart"     {{#if (eq node.config.ease "easeOutQuart")}}selected{{/if}}>easeOutQuart</option>
                    <option value="easeInOutQuart"   {{#if (eq node.config.ease "easeInOutQuart")}}selected{{/if}}>easeInOutQuart</option>
                    <option value="easeInQuint"      {{#if (eq node.config.ease "easeInQuint")}}selected{{/if}}>easeInQuint</option>
                    <option value="easeOutQuint"     {{#if (eq node.config.ease "easeOutQuint")}}selected{{/if}}>easeOutQuint</option>
                    <option value="easeInOutQuint"   {{#if (eq node.config.ease "easeInOutQuint")}}selected{{/if}}>easeInOutQuint</option>
                    <option value="easeInExpo"       {{#if (eq node.config.ease "easeInExpo")}}selected{{/if}}>easeInExpo</option>
                    <option value="easeOutExpo"      {{#if (eq node.config.ease "easeOutExpo")}}selected{{/if}}>easeOutExpo</option>
                    <option value="easeInOutExpo"    {{#if (eq node.config.ease "easeInOutExpo")}}selected{{/if}}>easeInOutExpo</option>
                    <option value="easeInCirc"       {{#if (eq node.config.ease "easeInCirc")}}selected{{/if}}>easeInCirc</option>
                    <option value="easeOutCirc"      {{#if (eq node.config.ease "easeOutCirc")}}selected{{/if}}>easeOutCirc</option>
                    <option value="easeInOutCirc"    {{#if (eq node.config.ease "easeInOutCirc")}}selected{{/if}}>easeInOutCirc</option>
                    <option value="easeInBack"       {{#if (eq node.config.ease "easeInBack")}}selected{{/if}}>easeInBack</option>
                    <option value="easeOutBack"      {{#if (eq node.config.ease "easeOutBack")}}selected{{/if}}>easeOutBack</option>
                    <option value="easeInOutBack"    {{#if (eq node.config.ease "easeInOutBack")}}selected{{/if}}>easeInOutBack</option>
                    <option value="easeInElastic"    {{#if (eq node.config.ease "easeInElastic")}}selected{{/if}}>easeInElastic</option>
                    <option value="easeOutElastic"   {{#if (eq node.config.ease "easeOutElastic")}}selected{{/if}}>easeOutElastic</option>
                    <option value="easeInOutElastic" {{#if (eq node.config.ease "easeInOutElastic")}}selected{{/if}}>easeInOutElastic</option>
                    <option value="easeInBounce"     {{#if (eq node.config.ease "easeInBounce")}}selected{{/if}}>easeInBounce</option>
                    <option value="easeOutBounce"    {{#if (eq node.config.ease "easeOutBounce")}}selected{{/if}}>easeOutBounce</option>
                    <option value="easeInOutBounce"  {{#if (eq node.config.ease "easeInOutBounce")}}selected{{/if}}>easeInOutBounce</option>
                  </select>
                </label>
  </div>
  <div class="v-field">
    <label>{{label}} delay
      <input type="number"
             data-config="{{delayKey}}"
             data-type="number"
             value="{{lookup config delayKey}}">
    </label>
  </div>
{{/inline}}



<div class="visualencer">
  <header class="v-toolbar">
    <label>
      Type:
      <select class="v-add-type">
        {{#each nodeTypes as |nt|}}
          <option value="{{nt.type}}">{{nt.label}}</option>
        {{/each}}
      </select>
    </label>
    <button type="button" class="v-add-node">
      <i class="fas fa-plus"></i> Add node
    </button>

    <button type="button" class="v-compile">
      <i class="fas fa-file-export"></i> Export to macro
    </button>
  </header>

  <section class="visualencer-canvas">
    {{!-- Capa de conexiones (SVG) --}}
    <svg class="v-connections"></svg>
    
    {{!-- Contenedor interno paneable --}}
    <div class="v-canvas-inner" style="transform: translate({{panX}}px, {{panY}}px);">

    {{#each graph.nodes as |node id|}}
      <div class="v-node" data-node-id="{{id}}" style="left: {{node.x}}px; top: {{node.y}}px;">
        <div class="v-node-header">
          <span class="v-node-title">{{node.type}}</span>
          <a class="v-node-delete"><i class="fas fa-times"></i></a>
        </div>

        <div class="v-node-ports">
          <div class="v-port v-port-in" data-port="in" title="Entrada"></div>
          <div class="v-port v-port-out" data-port="out" title="Salida"></div>
        </div>

        <div class="v-node-body">
          {{!-- START --}}
          {{#if (eq node.type "start")}}
            <p>Sequencer start node.</p>
          {{/if}}

          {{!-- EFFECT (root) --}}
          {{#if (eq node.type "effect")}}
            <fieldset class="v-group">
              <legend>Effect</legend>
              <p>This part of the Sequencer allows you to easily play visual effects on the canvas, such as animated .gifs, .webms, and other static images as moving effects and projectiles.</p>
              <h3 style="color:white;"><span>How do I use this?</span></h3>
              <p>When creating an effect section, you can assemble these methods like this:</p>
              <pre v-pre="" data-lang="js" class="language-js"><code class="lang-js language-js">
<span style="color:#89ddff;">Start / Sequence</span><span style="color:#f07178;"> → </span>
<span style="color:#89ddff;">effect</span> configure the file (example <span style="color:#ffcb6b">"modules/jb2a_patreon/Library/Generic/Healing/HealingAbility_01_Blue_200x200.webm"</span> or <span style="color:#ffcb6b">"jb2a.fire_bolt.orange"</span>)<span style="color:#f07178;"> → </span>
<span style="color:#89ddff;">atLocation</span> (example <span style="color:#ffcb6b">token selected</span>)<span style="color:#f07178;"> → </span>
<span style="color:#89ddff;">fadeIn</span> (example <span style="color:#ffcb6b">duration: 500, ease: easeOutQuint</span>)<span style="color:#f07178;"> and/or </span>
<span style="color:#89ddff;">fadeOut</span> (example <span style="color:#ffcb6b">duration: 250, ease: easeOutCirc</span>)<span style="color:#f07178;"> → </span>
<span style="color:#89ddff;">play</span></code></pre>
              <div class="v-field">
                <label>Base folder
                  <input type="text" data-config="baseFolder" value="{{node.config.baseFolder}}">
                </label>
              </div>
              <div class="v-field">
                <label>File
                  <input type="text" data-config="file" value="{{node.config.file}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- AT LOCATION (child) --}}
{{#if (eq node.type "atLocation")}}
  <fieldset class="v-group">
    <legend>At Location</legend>
<pre v-pre="" data-lang="js" class="language-js"><code class="lang-js language-js">
<span style="color:#f07178;"> → </span><span style="color:#89ddff;">atLocation</span> (<span style="color:#ffcb6b">token selected</span>) ///
<span style="color:#f07178;"> → </span><span style="color:#89ddff;">atLocation</span> (<span style="color:#ffcb6b">token target</span>)   ///
<span style="color:#f07178;"> → </span><span style="color:#89ddff;">atLocation</span> (<span style="color:#ffcb6b">"tokenID"</span>)      ///
<span style="color:#f07178;"> → </span><span style="color:#89ddff;">atLocation</span> (<span style="color:#ffcb6b">"tokenName"</span>)    ///</code></pre>
<p>A smart method that can take:</p>
<ul><li>Reference to a token</li><li>Reference to a template</li><li>Direct coordinate on the canvas</li><li>String reference (see <code>Name node</code></a>)</li></ul>
    <div class="v-field">
      <label>Mode
        <select data-config="mode">
          <option value="selected-token"  {{#if (eq node.config.mode "selected-token")}}selected{{/if}}>
            Token selected
          </option>
          <option value="selected-target" {{#if (eq node.config.mode "selected-target")}}selected{{/if}}>
            Token target
          </option>
          <option value="token-id"        {{#if (eq node.config.mode "token-id")}}selected{{/if}}>
            Token ID
          </option>
          <option value="token-name"      {{#if (eq node.config.mode "token-name")}}selected{{/if}}>
            Token by name
          </option>
          <option value="tile-id"         {{#if (eq node.config.mode "tile-id")}}selected{{/if}}>
            Tile by ID
          </option>
          <option value="point"           {{#if (eq node.config.mode "point")}}selected{{/if}}>
             Point (x,y)
          </option>
        </select>
      </label>
    </div>

    <div class="v-field">
      <label>Token ID
        <input type="text"
               data-config="tokenId"
               value="{{node.config.tokenId}}">
      </label>
    </div>

    <div class="v-field">
      <label>Token name
        <input type="text"
               data-config="tokenName"
               value="{{node.config.tokenName}}">
      </label>
    </div>

    <div class="v-field">
      <label>Tile ID
        <input type="text"
               data-config="tileId"
               value="{{node.config.tileId}}">
      </label>
    </div>

    <div class="v-field">
      <label>X
        <input type="number"
               data-config="x"
               data-type="number"
               value="{{node.config.x}}">
      </label>
    </div>

    <div class="v-field">
      <label>Y
        <input type="number"
               data-config="y"
               data-type="number"
               value="{{node.config.y}}">
      </label>
    </div>

    <hr>
        <p>Also supports a second options object that accepts:</p>
        <ul><li>
                <code>Offset node</code> (default <code> x: 0, y: 0 </code>) - causes the location to be offset by a set amount</li></ul>

    <div class="v-field">
      <label>
        <h4>Random offset</h4>
        <input type="number"
               data-config="randomOffset"
               data-type="number"
               value="{{node.config.randomOffset}}">
               <p><code>number|boolean</code> - causes the location to be offset by a random amount - if given a number, this acts as a multiplier for the randomness, using the size of the object (or a single grid square/hex) as the multiplier.</p>
      </label>
    </div>

    <div class="v-field">
      <label>
        <h4>Cache Location
        <input type="checkbox"
               data-config="cacheLocation"
               data-type="boolean"
               {{#if node.config.cacheLocation}}checked{{/if}}></h4>
               <p><code>boolean</code> - causes the given object’s location to be cached immediately rather than retrieved during the Sequence’s runtime</p>
      </label>
    </div>

    <div class="v-field">
      <label>
        <h4>Local
        <input type="checkbox"
               data-config="local"
               data-type="boolean"
               {{#if node.config.local}}checked{{/if}}></h4>
               <p><code>boolean</code> - Used with <code>offset</code> to cause the location to be offset locally to the effect’s rotation</p>
      </label>
    </div>

    <div class="v-field">
      <label>
        <h4>Grid Units
        <input type="checkbox"
               data-config="gridUnits"
               data-type="boolean"
               {{#if node.config.gridUnits}}checked{{/if}}></h4>
                <p><code>boolean</code> - Used with <code>Offset Node</code> (obligatory) to make each whole number represent in <code>x</code> and <code>y</code> to represent the effect’s scene’s grid size.</p>

      </label>
    </div>
  </fieldset>
{{/if}}


          {{!-- WAIT UNTIL FINISHED (child) --}}
          {{#if (eq node.type "waitUntilFinished")}}
            <fieldset class="v-group">
              <legend>Wait Until Finished</legend>
              <p>Calling this method will cause the effect to finish running before starting the next section.</p>
              <p>Passing a number as a parameter will cause the effect to wait for the given number (in ms) after finishing playing before continuing to the next section.</p>
              <p>If given a negative number, the Sequencer will continue to the next section early but continue playing the effect.</p>
              <p>Passing a second number will randomize the wait duration between the two given numbers.</p>
            </fieldset>
          {{/if}}

          {{!-- ASYNC (child) --}}
          {{#if (eq node.type "async")}}
            <fieldset class="v-group">
              <legend>Async</legend>
              <p><code>.async()</code></p>
              <p>Calling this will make each part of the effect finish playing before the next one starts playing.</p>
              <p>This differs from the <code>Wait Until Finished node</code> in the sense that the <code>Async node</code> is for each repetition (see <code>Repeats node</code>), whilst <code>Wait Until Finished node</code> is for the entire effect.</p>
            </fieldset>
          {{/if}}

          {{!-- REPEATS (child) --}}
          {{#if (eq node.type "repeats")}}
            <fieldset class="v-group">
              <legend>Repeats</legend>
              <p><code>.repeats(inRepetitions, inRepeatDelayMin, inRepeatDelayMax)</code></p>
              <p>Causes the effect to be repeated <code>inRepetitions</code> times, with an optional delay.</p>
              <p>As an option, you can give it <code>inRepeatDelayMin</code> for a static delay between repetitions, or <code>inRepeatDelayMin</code> and <code>inRepeatDelayMax</code> for a random delay between each call.</p>
              <p>It is highly recommended that you do not load too many files at the same time, as Foundry might not be able to load all of them.</p>
              <div class="v-field">
                <label>inRepetitions
                  <input type="number"
                         min="1"
                         data-config="repeats"
                         data-type="number"
                         value="{{node.config.repeats}}">
                </label>
              </div>

              <div class="v-field">
                <label><code>inRepeatDelayMin</code> (ms)
                  <input type="number"
                         data-config="repeatDelayMin"
                         data-type="number"
                         value="{{node.config.repeatDelayMin}}">
                </label>
              </div>

              <div class="v-field">
                <label><code>inRepeatDelayMax</code>
                  <input type="number"
                         data-config="repeatDelayMax"
                         data-type="number"
                         value="{{node.config.repeatDelayMax}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- DELAY (child) --}}
          {{#if (eq node.type "delay")}}
            <fieldset class="v-group">
              <legend>Delay</legend>
              <p><code>.delay(1000)</code> or <code>.delay(500, 1000)</code></p>
              <p>This will delay the effect from being played for a set amount of milliseconds. If given a second number, a random delay between the two numbers will be generated.</p>

              <div class="v-field">
                <label>Minimum delay (ms)
                  <input type="number"
                         data-config="delayMin"
                         data-type="number"
                         value="{{node.config.delayMin}}">
                </label>
              </div>

              <div class="v-field">
                <label>Maximum delay (ms)
                  <input type="number"
                         data-config="delayMax"
                         data-type="number"
                         value="{{node.config.delayMax}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- OPACITY (child) --}}
          {{#if (eq node.type "opacity")}}
            <fieldset class="v-group">
              <legend>Opacity</legend>
              <p><code>.opacity(0.5)</code></p>
              <p>Sets the opacity of the effect. If used with the <code>Fade node</code>, this defines what it will fade to/from.</p>

              <div class="v-field">
                <label>Opacity (0–1)
                  <input type="number"
                         step="0.05" min="0" max="1"
                         data-config="opacity"
                         data-type="number"
                         value="{{node.config.opacity}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- DURATION (child) --}}
          {{#if (eq node.type "duration")}}
            <fieldset class="v-group">
              <legend>Duration</legend>
              <p>Sets the duration in ms of the effect. If the duration is longer than the effect’s original duration, it will loop.</p>

              <div class="v-field">
                <label>Duration (ms)
                  <input type="number"
                         data-config="duration"
                         data-type="number"
                         value="{{node.config.duration}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- ON (child) --}}
          {{#if (eq node.type "on")}}
            <fieldset class="v-group">
              <legend>On</legend>
              <p><code>.on(inToken)</code> or <code>.on(inTile)</code></p>
              <p>Sets the target object to be animated. Accepts a token or a tile.</p>

              <div class="v-field">
                <label>Mode
                  <select data-config="mode">
                    <option value="inToken"  {{#if (eq node.config.mode "inToken")}}selected{{/if}}>inToken</option>
                    <option value="inTile"   {{#if (eq node.config.mode "inTile")}}selected{{/if}}>inTile</option>
                    <option value="token-id" {{#if (eq node.config.mode "token-id")}}selected{{/if}}>Token ID</option>
                    <option value="tile-id"  {{#if (eq node.config.mode "tile-id")}}selected{{/if}}>Tile ID</option>
                    <option value="point"    {{#if (eq node.config.mode "point")}}selected{{/if}}> Point (x,y)</option>
                  </select>
                </label>
              </div>

              <div class="v-field">
                <label>Token ID
                  <input type="text"
                         data-config="tokenId"
                         value="{{node.config.tokenId}}">
                </label>
              </div>

              <div class="v-field">
                <label>Tile ID
                  <input type="text"
                         data-config="tileId"
                         value="{{node.config.tileId}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- MOVE TOWARDS (child) --}}
          {{#if (eq node.type "moveTowards")}}
            <fieldset class="v-group">
              <legend>Move Towards</legend>
              <p><code>.moveTowards(inToken)</code> or <code>.moveTowards(inTile)</code> or <code>.moveTowards({ x: 0, y: 0 })</code></p>
              <p>Sets the location to move the target object to over the course of the duration.</p>
              <p>If no duration has been set, the target object will move towards the location at the default foundry speed.</p>
              <p>A second options parameter can set the ease of the movement, the delay before it starts, and whether the object should be centered on the given location.</p>
              <p><strong>Note:</strong> The <code>ease</code> parameter <em>not</em> supported for tokens due to Foundry removing support for it.</p>
              <p>Default parameters: <code>{ ease: "linear", delay: 0, relativeToCenter: false }</code></p>
              <p>Check out what easings are available here: <a href="https://easings.net/" target="_blank" rel="noopener">https://easings.net/</a></p>

              <div class="v-field">
                <label>Mode
                  <select data-config="mode">
                    <option value="inToken"  {{#if (eq node.config.mode "inToken")}}selected{{/if}}>inToken</option>
                    <option value="inTile"   {{#if (eq node.config.mode "inTile")}}selected{{/if}}>inTile</option>
                    <option value="token-id" {{#if (eq node.config.mode "token-id")}}selected{{/if}}>Token ID</option>
                    <option value="tile-id"  {{#if (eq node.config.mode "tile-id")}}selected{{/if}}>Tile ID</option>
                    <option value="point"    {{#if (eq node.config.mode "point")}}selected{{/if}}> Point (x,y)</option>
                  </select>
                </label>
              </div>

              <div class="v-field">
                <label>Token ID
                  <input type="text"
                         data-config="tokenId"
                         value="{{node.config.tokenId}}">
                </label>
              </div>

              <div class="v-field">
                <label>Tile ID
                  <input type="text"
                         data-config="tileId"
                         value="{{node.config.tileId}}">
                </label>
              </div>

              <div class="v-field">
                <label>X
                  <input type="number"
                         data-config="x"
                         data-type="number"
                         value="{{node.config.x}}">
                </label>
              </div>

              <div class="v-field">
                <label>Y
                  <input type="number"
                         data-config="y"
                         data-type="number"
                         value="{{node.config.y}}">
                </label>
              </div>

              <div class="v-field">
                <label>Ease<select data-config="ease">
                    <option value="linear"           {{#if (eq node.config.ease "linear")}}selected{{/if}}>linear</option>
                    <option value="easeInSine"       {{#if (eq node.config.ease "easeInSine")}}selected{{/if}}>easeInSine</option>
                    <option value="easeOutSine"      {{#if (eq node.config.ease "easeOutSine")}}selected{{/if}}>easeOutSine</option>
                    <option value="easeInOutSine"    {{#if (eq node.config.ease "easeInOutSine")}}selected{{/if}}>easeInOutSine</option>
                    <option value="easeInQuad"       {{#if (eq node.config.ease "easeInQuad")}}selected{{/if}}>easeInQuad</option>
                    <option value="easeOutQuad"      {{#if (eq node.config.ease "easeOutQuad")}}selected{{/if}}>easeOutQuad</option>
                    <option value="easeInOutQuad"    {{#if (eq node.config.ease "easeInOutQuad")}}selected{{/if}}>easeInOutQuad</option>
                    <option value="easeInCubic"      {{#if (eq node.config.ease "easeInCubic")}}selected{{/if}}>easeInCubic</option>
                    <option value="easeOutCubic"     {{#if (eq node.config.ease "easeOutCubic")}}selected{{/if}}>easeOutCubic</option>
                    <option value="easeInOutCubic"   {{#if (eq node.config.ease "easeInOutCubic")}}selected{{/if}}>easeInOutCubic</option>
                    <option value="easeInQuart"      {{#if (eq node.config.ease "easeInQuart")}}selected{{/if}}>easeInQuart</option>
                    <option value="easeOutQuart"     {{#if (eq node.config.ease "easeOutQuart")}}selected{{/if}}>easeOutQuart</option>
                    <option value="easeInOutQuart"   {{#if (eq node.config.ease "easeInOutQuart")}}selected{{/if}}>easeInOutQuart</option>
                    <option value="easeInQuint"      {{#if (eq node.config.ease "easeInQuint")}}selected{{/if}}>easeInQuint</option>
                    <option value="easeOutQuint"     {{#if (eq node.config.ease "easeOutQuint")}}selected{{/if}}>easeOutQuint</option>
                    <option value="easeInOutQuint"   {{#if (eq node.config.ease "easeInOutQuint")}}selected{{/if}}>easeInOutQuint</option>
                    <option value="easeInExpo"       {{#if (eq node.config.ease "easeInExpo")}}selected{{/if}}>easeInExpo</option>
                    <option value="easeOutExpo"      {{#if (eq node.config.ease "easeOutExpo")}}selected{{/if}}>easeOutExpo</option>
                    <option value="easeInOutExpo"    {{#if (eq node.config.ease "easeInOutExpo")}}selected{{/if}}>easeInOutExpo</option>
                    <option value="easeInCirc"       {{#if (eq node.config.ease "easeInCirc")}}selected{{/if}}>easeInCirc</option>
                    <option value="easeOutCirc"      {{#if (eq node.config.ease "easeOutCirc")}}selected{{/if}}>easeOutCirc</option>
                    <option value="easeInOutCirc"    {{#if (eq node.config.ease "easeInOutCirc")}}selected{{/if}}>easeInOutCirc</option>
                    <option value="easeInBack"       {{#if (eq node.config.ease "easeInBack")}}selected{{/if}}>easeInBack</option>
                    <option value="easeOutBack"      {{#if (eq node.config.ease "easeOutBack")}}selected{{/if}}>easeOutBack</option>
                    <option value="easeInOutBack"    {{#if (eq node.config.ease "easeInOutBack")}}selected{{/if}}>easeInOutBack</option>
                    <option value="easeInElastic"    {{#if (eq node.config.ease "easeInElastic")}}selected{{/if}}>easeInElastic</option>
                    <option value="easeOutElastic"   {{#if (eq node.config.ease "easeOutElastic")}}selected{{/if}}>easeOutElastic</option>
                    <option value="easeInOutElastic" {{#if (eq node.config.ease "easeInOutElastic")}}selected{{/if}}>easeInOutElastic</option>
                    <option value="easeInBounce"     {{#if (eq node.config.ease "easeInBounce")}}selected{{/if}}>easeInBounce</option>
                    <option value="easeOutBounce"    {{#if (eq node.config.ease "easeOutBounce")}}selected{{/if}}>easeOutBounce</option>
                    <option value="easeInOutBounce"  {{#if (eq node.config.ease "easeInOutBounce")}}selected{{/if}}>easeInOutBounce</option>
                  </select>
                </label>
              </div>

              <div class="v-field">
                <label>Delay (ms)
                  <input type="number"
                         data-config="delay"
                         data-type="number"
                         value="{{node.config.delay}}">
                </label>
              </div>

              <div class="v-field">
                <label>
                  <input type="checkbox"
                         data-config="relativeToCenter"
                         data-type="boolean"
                         {{#if node.config.relativeToCenter}}checked{{/if}}>
                  relativeToCenter
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- MOVE SPEED (child) --}}
          {{#if (eq node.type "moveSpeed")}}
            <fieldset class="v-group">
              <legend>Move Speed</legend>
              <p><code>.moveSpeed(500)</code></p>
              <p>Sets the speed of the animation if <code>Move Towards node</code> has been called</p>

              <div class="v-field">
                <label>moveSpeed
                  <input type="number"
                         data-config="moveSpeed"
                         data-type="number"
                         value="{{node.config.moveSpeed}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- ROTATE TOWARDS (child) --}}
          {{#if (eq node.type "rotateTowards")}}
            <fieldset class="v-group">
              <legend>Rotate Towards</legend>
              <p><code>.rotateTowards(target, options)</code></p>
              <p><code>.rotateTowards(inToken)</code> or <code>.rotateTowards(inTile)</code> or <code>.rotateTowards({ x: 0, y: 0 })</code></p>
              <p>Causes the target object to rotate towards a given target.</p>
              <p>Default parameters: <code>{ duration: 0, ease: "linear", delay: 0, rotationOffset: 0, towardsCenter: true, cacheLocation: false,}</code></p>

              <div class="v-field">
                <label>Mode
                  <select data-config="mode">
                    <option value="inToken"  {{#if (eq node.config.mode "inToken")}}selected{{/if}}>inToken</option>
                    <option value="inTile"   {{#if (eq node.config.mode "inTile")}}selected{{/if}}>inTile</option>
                    <option value="token-id" {{#if (eq node.config.mode "token-id")}}selected{{/if}}>Token ID</option>
                    <option value="tile-id"  {{#if (eq node.config.mode "tile-id")}}selected{{/if}}>Tile ID</option>
                    <option value="point"    {{#if (eq node.config.mode "point")}}selected{{/if}}> Point (x,y)</option>
                  </select>
                </label>
              </div>

              <div class="v-field">
                <label>Token ID
                  <input type="text"
                         data-config="tokenId"
                         value="{{node.config.tokenId}}">
                </label>
              </div>

              <div class="v-field">
                <label>Tile ID
                  <input type="text"
                         data-config="tileId"
                         value="{{node.config.tileId}}">
                </label>
              </div>

              <div class="v-field">
                <label>X
                  <input type="number"
                         data-config="x"
                         data-type="number"
                         value="{{node.config.x}}">
                </label>
              </div>

              <div class="v-field">
                <label>Y
                  <input type="number"
                         data-config="y"
                         data-type="number"
                         value="{{node.config.y}}">
                </label>
              </div>

              <hr>
              
              <p>A second options parameter can set the duration of the rotation (0 is instant), the ease, the delay before it starts, and any given rotation offset.</p>

              <div class="v-field">
                <label>Duration (ms)
                  <input type="number"
                         data-config="duration"
                         data-type="number"
                         value="{{node.config.duration}}">
                </label>
              </div>

              <div class="v-field">
                <label>Ease
              <p><strong>Note:</strong> The <code>ease</code> parameters are <em>not</em> supported for tokens due to Foundry removing support for it.</p>
              <p>Check out what easings are available here: <a href="https://easings.net/" target="_blank" rel="noopener">https://easings.net/</a></p><select data-config="ease">
                    <option value="linear"           {{#if (eq node.config.ease "linear")}}selected{{/if}}>linear</option>
                    <option value="easeInSine"       {{#if (eq node.config.ease "easeInSine")}}selected{{/if}}>easeInSine</option>
                    <option value="easeOutSine"      {{#if (eq node.config.ease "easeOutSine")}}selected{{/if}}>easeOutSine</option>
                    <option value="easeInOutSine"    {{#if (eq node.config.ease "easeInOutSine")}}selected{{/if}}>easeInOutSine</option>
                    <option value="easeInQuad"       {{#if (eq node.config.ease "easeInQuad")}}selected{{/if}}>easeInQuad</option>
                    <option value="easeOutQuad"      {{#if (eq node.config.ease "easeOutQuad")}}selected{{/if}}>easeOutQuad</option>
                    <option value="easeInOutQuad"    {{#if (eq node.config.ease "easeInOutQuad")}}selected{{/if}}>easeInOutQuad</option>
                    <option value="easeInCubic"      {{#if (eq node.config.ease "easeInCubic")}}selected{{/if}}>easeInCubic</option>
                    <option value="easeOutCubic"     {{#if (eq node.config.ease "easeOutCubic")}}selected{{/if}}>easeOutCubic</option>
                    <option value="easeInOutCubic"   {{#if (eq node.config.ease "easeInOutCubic")}}selected{{/if}}>easeInOutCubic</option>
                    <option value="easeInQuart"      {{#if (eq node.config.ease "easeInQuart")}}selected{{/if}}>easeInQuart</option>
                    <option value="easeOutQuart"     {{#if (eq node.config.ease "easeOutQuart")}}selected{{/if}}>easeOutQuart</option>
                    <option value="easeInOutQuart"   {{#if (eq node.config.ease "easeInOutQuart")}}selected{{/if}}>easeInOutQuart</option>
                    <option value="easeInQuint"      {{#if (eq node.config.ease "easeInQuint")}}selected{{/if}}>easeInQuint</option>
                    <option value="easeOutQuint"     {{#if (eq node.config.ease "easeOutQuint")}}selected{{/if}}>easeOutQuint</option>
                    <option value="easeInOutQuint"   {{#if (eq node.config.ease "easeInOutQuint")}}selected{{/if}}>easeInOutQuint</option>
                    <option value="easeInExpo"       {{#if (eq node.config.ease "easeInExpo")}}selected{{/if}}>easeInExpo</option>
                    <option value="easeOutExpo"      {{#if (eq node.config.ease "easeOutExpo")}}selected{{/if}}>easeOutExpo</option>
                    <option value="easeInOutExpo"    {{#if (eq node.config.ease "easeInOutExpo")}}selected{{/if}}>easeInOutExpo</option>
                    <option value="easeInCirc"       {{#if (eq node.config.ease "easeInCirc")}}selected{{/if}}>easeInCirc</option>
                    <option value="easeOutCirc"      {{#if (eq node.config.ease "easeOutCirc")}}selected{{/if}}>easeOutCirc</option>
                    <option value="easeInOutCirc"    {{#if (eq node.config.ease "easeInOutCirc")}}selected{{/if}}>easeInOutCirc</option>
                    <option value="easeInBack"       {{#if (eq node.config.ease "easeInBack")}}selected{{/if}}>easeInBack</option>
                    <option value="easeOutBack"      {{#if (eq node.config.ease "easeOutBack")}}selected{{/if}}>easeOutBack</option>
                    <option value="easeInOutBack"    {{#if (eq node.config.ease "easeInOutBack")}}selected{{/if}}>easeInOutBack</option>
                    <option value="easeInElastic"    {{#if (eq node.config.ease "easeInElastic")}}selected{{/if}}>easeInElastic</option>
                    <option value="easeOutElastic"   {{#if (eq node.config.ease "easeOutElastic")}}selected{{/if}}>easeOutElastic</option>
                    <option value="easeInOutElastic" {{#if (eq node.config.ease "easeInOutElastic")}}selected{{/if}}>easeInOutElastic</option>
                    <option value="easeInBounce"     {{#if (eq node.config.ease "easeInBounce")}}selected{{/if}}>easeInBounce</option>
                    <option value="easeOutBounce"    {{#if (eq node.config.ease "easeOutBounce")}}selected{{/if}}>easeOutBounce</option>
                    <option value="easeInOutBounce"  {{#if (eq node.config.ease "easeInOutBounce")}}selected{{/if}}>easeInOutBounce</option>
                  </select>
                </label>
              </div>

              <div class="v-field">
                <label>Delay (ms)
                  <input type="number"
                         data-config="delay"
                         data-type="number"
                         value="{{node.config.delay}}">
                </label>
              </div>

              <div class="v-field">
                <label>rotationOffset (º)
                  <input type="number"
                         data-config="rotationOffset"
                         data-type="number"
                         value="{{node.config.rotationOffset}}">
                </label>
              </div>

              <div class="v-field">
                <label>
                  <input type="checkbox"
                         data-config="towardsCenter"
                         data-type="boolean"
                         {{#if node.config.towardsCenter}}checked{{/if}}>
                  towardsCenter
                </label>
              </div>

              <div class="v-field">
                <label>
                  
        <h4>Cache Location
                  <input type="checkbox"
                         data-config="cacheLocation"
                         data-type="boolean"
                         {{#if node.config.cacheLocation}}checked{{/if}}></h4>
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- TELEPORT TO (child) --}}
          {{#if (eq node.type "teleportTo")}}
            <fieldset class="v-group">
              <legend>Teleport To</legend>
              <p><code>.teleportTo(target, options)</code></p>
              <p><code>.teleportTo(inToken)</code> or <code>.teleportTo(inTile)</code> or <code>.teleportTo({ x: 0, y: 0 })</code></p>
              <p>Sets the location to teleport the target object to.</p>
              <p>A second options parameter can set the delay before it starts, as well as if the object should be centered on the given location.</p>
              <p>Default parameters: <code>{ delay: 0, relativeToCenter: false }</code></p>

              <div class="v-field">
                <label>Mode
                  <select data-config="mode">
                    <option value="inToken"  {{#if (eq node.config.mode "inToken")}}selected{{/if}}>inToken</option>
                    <option value="inTile"   {{#if (eq node.config.mode "inTile")}}selected{{/if}}>inTile</option>
                    <option value="token-id" {{#if (eq node.config.mode "token-id")}}selected{{/if}}>Token ID</option>
                    <option value="tile-id"  {{#if (eq node.config.mode "tile-id")}}selected{{/if}}>Tile ID</option>
                    <option value="point"    {{#if (eq node.config.mode "point")}}selected{{/if}}> Point (x,y)</option>
                  </select>
                </label>
              </div>

              <div class="v-field">
                <label>Token ID
                  <input type="text"
                         data-config="tokenId"
                         value="{{node.config.tokenId}}">
                </label>
              </div>

              <div class="v-field">
                <label>Tile ID
                  <input type="text"
                         data-config="tileId"
                         value="{{node.config.tileId}}">
                </label>
              </div>

              <div class="v-field">
                <label>X
                  <input type="number"
                         data-config="x"
                         data-type="number"
                         value="{{node.config.x}}">
                </label>
              </div>

              <div class="v-field">
                <label>Y
                  <input type="number"
                         data-config="y"
                         data-type="number"
                         value="{{node.config.y}}">
                </label>
              </div>

              <div class="v-field">
                <label>Delay (ms)
                  <input type="number"
                         data-config="delay"
                         data-type="number"
                         value="{{node.config.delay}}">
                </label>
              </div>

              <div class="v-field">
                <label>
                  Relative to Center
                  <input type="checkbox"
                         data-config="relativeToCenter"
                         data-type="boolean"
                         {{#if node.config.relativeToCenter}}checked{{/if}}>
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- OFFSET (child) --}}
          {{#if (eq node.type "offset")}}
            <fieldset class="v-group">
              <legend>Offset</legend>
              <p><code>.offset({ x: 0, y: 0 })</code></p>
              <p>Causes the movement or teleportation to be offset in the X and/or Y axis</p>

              <div class="v-field">
                <label>Offset X
                  <input type="number"
                         data-config="x"
                         data-type="number"
                         value="{{node.config.x}}">
                </label>
              </div>

              <div class="v-field">
                <label>Offset Y
                  <input type="number"
                         data-config="y"
                         data-type="number"
                         value="{{node.config.y}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- CLOSEST SQUARE (child) --}}
          {{#if (eq node.type "closestSquare")}}
            <fieldset class="v-group">
              <legend>Closest Square</legend>
              <p><code>.closestSquare()</code> or <code>.closestSquare(boolean)</code></p>
              <p>Causes the movement or teleportation to pick the closest non-intersecting square as the target location</p>
            </fieldset>
          {{/if}}

          {{!-- SNAP TO GRID (child) --}}
          {{#if (eq node.type "snapToGrid")}}
            <fieldset class="v-group">
              <legend>Snap To Grid</legend>
              <p><code>.snapToGrid()</code> or <code>.snapToGrid(boolean)</code></p>
              <p>Causes the final location to be snapped to the grid</p>
            </fieldset>
          {{/if}}

          {{!-- ROTATE (child) --}}
          {{#if (eq node.type "rotate")}}
            <fieldset class="v-group">
              <legend>Rotate</legend>
              <p><code>.rotate(90)</code></p>
              <p>Sets the rotation of the animation, which is added on top of the calculated rotation after <code>Rotate Towards node</code></p>
              <div class="v-field">
                <label>Rotate (º)
                  <input type="number"
                         data-config="rotate"
                         data-type="number"
                         value="{{node.config.rotate}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- ROTATE IN (child) --}}
          {{#if (eq node.type "rotateIn")}}
            <fieldset class="v-group">
              <legend>Rotate In</legend>
              <p><code>.rotateIn(degrees, duration, options)</code></p>
              <p><code>.rotateIn(90, 250)</code> or <code>.rotateIn(-90, 500, {ease: "easeOutCubic"})</code> or <code>.rotateIn(-90, 500, { ease: "easeOutCubic", delay: 100 })</code></p>
              <p>Causes the target object to rotate when it starts playing.</p>
              <p>The first parameter is the degrees from which to start the rotation.</p>
              <p>The second parameter is how many milliseconds the rotation will take.</p>
              <p>A third options parameter can set the ease of the rotation, and the delay before it starts.</p>
              <p>Default parameters: <code>{ ease: "linear", delay: 0 }</code></p>

              <div class="v-field">
                <label>Degrees º
                  <input type="number"
                         data-config="degrees"
                         data-type="number"
                         value="{{node.config.degrees}}">
                </label>
              </div>

              <div class="v-field">
                <label>Duration (ms)
                  <input type="number"
                         data-config="duration"
                         data-type="number"
                         value="{{node.config.duration}}">
                </label>
              </div>
              

              <div class="v-field">
                <label>Ease
                    
              <p><strong>Note:</strong> The <code>ease</code> parameters are <em>not</em> supported for tokens due to Foundry removing support for it.</p>
              <p>Check out what easings are available here: <a href="https://easings.net/" target="_blank" rel="noopener">https://easings.net/</a></p>
              <select data-config="ease">
                    <option value="linear"           {{#if (eq node.config.ease "linear")}}selected{{/if}}>linear</option>
                    <option value="easeInSine"       {{#if (eq node.config.ease "easeInSine")}}selected{{/if}}>easeInSine</option>
                    <option value="easeOutSine"      {{#if (eq node.config.ease "easeOutSine")}}selected{{/if}}>easeOutSine</option>
                    <option value="easeInOutSine"    {{#if (eq node.config.ease "easeInOutSine")}}selected{{/if}}>easeInOutSine</option>
                    <option value="easeInQuad"       {{#if (eq node.config.ease "easeInQuad")}}selected{{/if}}>easeInQuad</option>
                    <option value="easeOutQuad"      {{#if (eq node.config.ease "easeOutQuad")}}selected{{/if}}>easeOutQuad</option>
                    <option value="easeInOutQuad"    {{#if (eq node.config.ease "easeInOutQuad")}}selected{{/if}}>easeInOutQuad</option>
                    <option value="easeInCubic"      {{#if (eq node.config.ease "easeInCubic")}}selected{{/if}}>easeInCubic</option>
                    <option value="easeOutCubic"     {{#if (eq node.config.ease "easeOutCubic")}}selected{{/if}}>easeOutCubic</option>
                    <option value="easeInOutCubic"   {{#if (eq node.config.ease "easeInOutCubic")}}selected{{/if}}>easeInOutCubic</option>
                    <option value="easeInQuart"      {{#if (eq node.config.ease "easeInQuart")}}selected{{/if}}>easeInQuart</option>
                    <option value="easeOutQuart"     {{#if (eq node.config.ease "easeOutQuart")}}selected{{/if}}>easeOutQuart</option>
                    <option value="easeInOutQuart"   {{#if (eq node.config.ease "easeInOutQuart")}}selected{{/if}}>easeInOutQuart</option>
                    <option value="easeInQuint"      {{#if (eq node.config.ease "easeInQuint")}}selected{{/if}}>easeInQuint</option>
                    <option value="easeOutQuint"     {{#if (eq node.config.ease "easeOutQuint")}}selected{{/if}}>easeOutQuint</option>
                    <option value="easeInOutQuint"   {{#if (eq node.config.ease "easeInOutQuint")}}selected{{/if}}>easeInOutQuint</option>
                    <option value="easeInExpo"       {{#if (eq node.config.ease "easeInExpo")}}selected{{/if}}>easeInExpo</option>
                    <option value="easeOutExpo"      {{#if (eq node.config.ease "easeOutExpo")}}selected{{/if}}>easeOutExpo</option>
                    <option value="easeInOutExpo"    {{#if (eq node.config.ease "easeInOutExpo")}}selected{{/if}}>easeInOutExpo</option>
                    <option value="easeInCirc"       {{#if (eq node.config.ease "easeInCirc")}}selected{{/if}}>easeInCirc</option>
                    <option value="easeOutCirc"      {{#if (eq node.config.ease "easeOutCirc")}}selected{{/if}}>easeOutCirc</option>
                    <option value="easeInOutCirc"    {{#if (eq node.config.ease "easeInOutCirc")}}selected{{/if}}>easeInOutCirc</option>
                    <option value="easeInBack"       {{#if (eq node.config.ease "easeInBack")}}selected{{/if}}>easeInBack</option>
                    <option value="easeOutBack"      {{#if (eq node.config.ease "easeOutBack")}}selected{{/if}}>easeOutBack</option>
                    <option value="easeInOutBack"    {{#if (eq node.config.ease "easeInOutBack")}}selected{{/if}}>easeInOutBack</option>
                    <option value="easeInElastic"    {{#if (eq node.config.ease "easeInElastic")}}selected{{/if}}>easeInElastic</option>
                    <option value="easeOutElastic"   {{#if (eq node.config.ease "easeOutElastic")}}selected{{/if}}>easeOutElastic</option>
                    <option value="easeInOutElastic" {{#if (eq node.config.ease "easeInOutElastic")}}selected{{/if}}>easeInOutElastic</option>
                    <option value="easeInBounce"     {{#if (eq node.config.ease "easeInBounce")}}selected{{/if}}>easeInBounce</option>
                    <option value="easeOutBounce"    {{#if (eq node.config.ease "easeOutBounce")}}selected{{/if}}>easeOutBounce</option>
                    <option value="easeInOutBounce"  {{#if (eq node.config.ease "easeInOutBounce")}}selected{{/if}}>easeInOutBounce</option>
                  </select>
                </label>
              </div>

              <div class="v-field">
                <label>Delay (ms)
                  <input type="number"
                         data-config="delay"
                         data-type="number"
                         value="{{node.config.delay}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- ROTATE OUT (child) --}}
          {{#if (eq node.type "rotateOut")}}
            <fieldset class="v-group">
              <legend>Rotate Out</legend>
              <p><code>.rotateOut(degrees, duration, options)</code></p>
              <p><code>.rotateOut(90, 250)</code> or <code>.rotateOut(-90, 500, {ease: "easeOutCubic"})</code> or <code>.rotateOut(-90, 500, { ease: "easeOutCubic", delay: -100 })</code></p>
              <p>Causes the target object to rotate when it finishes playing.</p>
              <p>The first parameter is the degrees from which to start the rotation.</p>
              <p>The second parameter is how many milliseconds the rotation will take.</p>
              <p>A third options parameter can set the ease of the rotation, and the delay before it ends. E.g. a delay of -500 means the rotation will finish 500ms before the end.</p>
              <p>Default parameters: <code>{ ease: "linear", delay: 0 }</code></p>

              <div class="v-field">
                <label>Degrees º
                  <input type="number"
                         data-config="degrees"
                         data-type="number"
                         value="{{node.config.degrees}}">
                </label>
              </div>

              <div class="v-field">
                <label>Duration (ms)
                  <input type="number"
                         data-config="duration"
                         data-type="number"
                         value="{{node.config.duration}}">
                </label>
              </div>

              <div class="v-field">
                <label>Ease
                    
              <p><strong>Note:</strong> The <code>ease</code> parameters are <em>not</em> supported for tokens due to Foundry removing support for it.</p>
              <p>Check out what easings are available here: <a href="https://easings.net/" target="_blank" rel="noopener">https://easings.net/</a></p><select data-config="ease">
                    <option value="linear"           {{#if (eq node.config.ease "linear")}}selected{{/if}}>linear</option>
                    <option value="easeInSine"       {{#if (eq node.config.ease "easeInSine")}}selected{{/if}}>easeInSine</option>
                    <option value="easeOutSine"      {{#if (eq node.config.ease "easeOutSine")}}selected{{/if}}>easeOutSine</option>
                    <option value="easeInOutSine"    {{#if (eq node.config.ease "easeInOutSine")}}selected{{/if}}>easeInOutSine</option>
                    <option value="easeInQuad"       {{#if (eq node.config.ease "easeInQuad")}}selected{{/if}}>easeInQuad</option>
                    <option value="easeOutQuad"      {{#if (eq node.config.ease "easeOutQuad")}}selected{{/if}}>easeOutQuad</option>
                    <option value="easeInOutQuad"    {{#if (eq node.config.ease "easeInOutQuad")}}selected{{/if}}>easeInOutQuad</option>
                    <option value="easeInCubic"      {{#if (eq node.config.ease "easeInCubic")}}selected{{/if}}>easeInCubic</option>
                    <option value="easeOutCubic"     {{#if (eq node.config.ease "easeOutCubic")}}selected{{/if}}>easeOutCubic</option>
                    <option value="easeInOutCubic"   {{#if (eq node.config.ease "easeInOutCubic")}}selected{{/if}}>easeInOutCubic</option>
                    <option value="easeInQuart"      {{#if (eq node.config.ease "easeInQuart")}}selected{{/if}}>easeInQuart</option>
                    <option value="easeOutQuart"     {{#if (eq node.config.ease "easeOutQuart")}}selected{{/if}}>easeOutQuart</option>
                    <option value="easeInOutQuart"   {{#if (eq node.config.ease "easeInOutQuart")}}selected{{/if}}>easeInOutQuart</option>
                    <option value="easeInQuint"      {{#if (eq node.config.ease "easeInQuint")}}selected{{/if}}>easeInQuint</option>
                    <option value="easeOutQuint"     {{#if (eq node.config.ease "easeOutQuint")}}selected{{/if}}>easeOutQuint</option>
                    <option value="easeInOutQuint"   {{#if (eq node.config.ease "easeInOutQuint")}}selected{{/if}}>easeInOutQuint</option>
                    <option value="easeInExpo"       {{#if (eq node.config.ease "easeInExpo")}}selected{{/if}}>easeInExpo</option>
                    <option value="easeOutExpo"      {{#if (eq node.config.ease "easeOutExpo")}}selected{{/if}}>easeOutExpo</option>
                    <option value="easeInOutExpo"    {{#if (eq node.config.ease "easeInOutExpo")}}selected{{/if}}>easeInOutExpo</option>
                    <option value="easeInCirc"       {{#if (eq node.config.ease "easeInCirc")}}selected{{/if}}>easeInCirc</option>
                    <option value="easeOutCirc"      {{#if (eq node.config.ease "easeOutCirc")}}selected{{/if}}>easeOutCirc</option>
                    <option value="easeInOutCirc"    {{#if (eq node.config.ease "easeInOutCirc")}}selected{{/if}}>easeInOutCirc</option>
                    <option value="easeInBack"       {{#if (eq node.config.ease "easeInBack")}}selected{{/if}}>easeInBack</option>
                    <option value="easeOutBack"      {{#if (eq node.config.ease "easeOutBack")}}selected{{/if}}>easeOutBack</option>
                    <option value="easeInOutBack"    {{#if (eq node.config.ease "easeInOutBack")}}selected{{/if}}>easeInOutBack</option>
                    <option value="easeInElastic"    {{#if (eq node.config.ease "easeInElastic")}}selected{{/if}}>easeInElastic</option>
                    <option value="easeOutElastic"   {{#if (eq node.config.ease "easeOutElastic")}}selected{{/if}}>easeOutElastic</option>
                    <option value="easeInOutElastic" {{#if (eq node.config.ease "easeInOutElastic")}}selected{{/if}}>easeInOutElastic</option>
                    <option value="easeInBounce"     {{#if (eq node.config.ease "easeInBounce")}}selected{{/if}}>easeInBounce</option>
                    <option value="easeOutBounce"    {{#if (eq node.config.ease "easeOutBounce")}}selected{{/if}}>easeOutBounce</option>
                    <option value="easeInOutBounce"  {{#if (eq node.config.ease "easeInOutBounce")}}selected{{/if}}>easeInOutBounce</option>
                  </select>
                </label>
              </div>

              <div class="v-field">
                <label>Delay (ms)
                  <input type="number"
                         data-config="delay"
                         data-type="number"
                         value="{{node.config.delay}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- TINT (child) --}}
          {{#if (eq node.type "tint")}}
            <fieldset class="v-group">
              <legend>Tint</legend>
              <p><code>.tint()</code> or <code>.tint(hexadecimal)</code> or <code>.tint(decimal)</code></p>
              <p>Examples:</p>
              <ul><li><code>.tint("#FF0000")</code> - Red tint</li><li><code>.tint(0x0000FF)</code> - Blue tint</li></ul>
              <p>This method tints the token or tile with the given color. Supplying no parameter will reset the tint to nothing.</p>

              <div class="v-field">
                <label>Mode
                  <select data-config="mode">
                    <option value="none"    {{#if (eq node.config.mode "none")}}selected{{/if}}>(ninguno)</option>
                    <option value="reset"   {{#if (eq node.config.mode "reset")}}selected{{/if}}>reset</option>
                    <option value="hex"     {{#if (eq node.config.mode "hex")}}selected{{/if}}>hex</option>
                    <option value="decimal" {{#if (eq node.config.mode "decimal")}}selected{{/if}}>decimal</option>
                  </select>
                </label>
              </div>

              <div class="v-field">
                <label>Tint hex
                  <input type="text"
                         data-config="hex"
                         value="{{node.config.hex}}">
                </label>
              </div>

              <div class="v-field">
                <label>Tint decimal
                  <input type="number"
                         data-config="dec"
                         data-type="number"
                         value="{{node.config.dec}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- HIDE (child) --}}
          {{#if (eq node.type "hide")}}
            <fieldset class="v-group">
              <legend>Hide</legend>
              <p><code>.hide()</code> or <code>.hide(boolean)</code></p>
              <p>Causes the animated object to be hidden (or visible, if the parameter passed to it is <code>false</code>)</p>
            </fieldset>
          {{/if}}

          {{!-- SHOW (child) --}}
          {{#if (eq node.type "show")}}
            <fieldset class="v-group">
              <legend>Show</legend>
              <p><code>.show()</code> or <code>.show(boolean)</code></p>
              <p>Causes the animated object to be visible (or hidden, if the parameter passed to it is <code>false</code>)</p>
            </fieldset>
          {{/if}}

          {{!-- SOUND (root) --}}
          {{#if (eq node.type "sound")}}
            <fieldset class="v-group">
              <legend>Sound</legend>
              <div class="v-field">
                <label>File
                  <input type="text" data-config="file" value="{{node.config.file}}">
                </label>
              </div>
              <div class="v-field">
                <label>
                  <input type="checkbox"
                         data-config="locally"
                         data-type="boolean"
                         {{#if node.config.locally}}checked{{/if}}>
                  Sólo local
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- ANIMATION (root, simplificada) --}}
          {{#if (eq node.type "animation")}}
            <fieldset class="v-group">
              <legend>Animation</legend>
              <p>This part of the Sequencer acts <strong>on</strong> objects in the scene, such as tokens, tiles, etc, and it can do things like moving tokens, teleporting them, hiding them, fading them out, etc.</p>
              <h3 style="color:white;"><span>How do I use this?</span></a></h3>
              <p>When creating an animation section, you can assemble these methods like this:</p>
<pre v-pre="" data-lang="js" class="language-js"><code class="lang-js language-js">
<span style="color:#89ddff;">Start / Sequence</span><span style="color:#f07178;"> → </span>
<span style="color:#89ddff;">Animation</span> <span style="color:#f07178;"> → </span>
<span style="color:#89ddff;">On</span> <span style="color:#f07178;"> → </span>
<span style="color:#89ddff;">Fade</span> (example <span style="color:#ffcb6b">fadeIn: 500ms</span>) <span style="color:#f07178;"> → </span>
<span style="color:#89ddff;">Teleport To</span> (example <span style="color:#ffcb6b">x: 100, y: 0</span>) <span style="color:#f07178;"> → </span>
<span style="color:#89ddff;">Play</span></code></pre>

              <div class="v-field">
                <label>Preset
                    <p><code>.preset("name")</code></p>
                    <p>Applies a preset to the current animation - read the <a href="#/presets">Sequencer Presets article</a> for more information.</p>
                  <input type="text"
                         data-config="preset"
                         value="{{node.config.preset}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- SCROLLING TEXT (root) --}}
          {{#if (eq node.type "scrollingText")}}
            <div class="v-field">
              <label>Text
                <input type="text" data-config="text" value="{{node.config.text}}">
              </label>
            </div>
            <div class="v-field">
              <label>Duration (ms)
                <input type="number" data-config="durationMs" data-type="number" value="{{node.config.durationMs}}">
              </label>
            </div>
          {{/if}}

          {{!-- CANVAS PAN (root) --}}
          {{#if (eq node.type "canvasPan")}}
            <div class="v-field">
              <label>Duration (ms)
                <input type="number" data-config="durationMs" data-type="number" value="{{node.config.durationMs}}">
              </label>
            </div>
            <div class="v-field">
              <label>Scale
                <input type="number" step="0.1" data-config="scale" data-type="number" value="{{node.config.scale}}">
              </label>
            </div>
            <div class="v-field">
              <label>Lock view (ms)
                <input type="number" data-config="lockViewMs" data-type="number" value="{{node.config.lockViewMs}}">
              </label>
            </div>
          {{/if}}

          {{!-- CROSSHAIR (root) --}}
          {{#if (eq node.type "crosshair")}}
            <div class="v-field">
              <label>Name
                <input type="text" data-config="name" value="{{node.config.name}}">
              </label>
              <label>File
                <input type="text" data-config="file" value="{{node.config.file}}">
              </label>
            </div>
          {{/if}}

          {{!-- WAIT (root) --}}
          {{#if (eq node.type "wait")}}
            <div class="v-field">
              <label>Tiempo (ms)
                <input type="number" data-config="ms" data-type="number" value="{{node.config.ms}}">
              </label>
            </div>
          {{/if}}

          {{!-- MACRO (root) --}}
          {{#if (eq node.type "macro")}}
            <div class="v-field">
              <label>Nombre de Macro
                <input type="text" data-config="macroName" value="{{node.config.macroName}}">
              </label>
            </div>
          {{/if}}

          {{!-- START TIME (child) --}}
          {{#if (eq node.type "startTime")}}
            <fieldset class="v-group">
              <legend>Start Time</legend>

              <div class="v-field">
                <label>startTime (ms)
                  <input type="number"
                         data-config="startTime"
                         data-type="number"
                         value="{{node.config.startTime}}">
                </label>
              </div>

              <div class="v-field">
                <label>startTimePerc (0–1)
                  <input type="number"
                         step="0.05" min="0" max="1"
                         data-config="startTimePerc"
                         data-type="number"
                         value="{{node.config.startTimePerc}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- END TIME (child) --}}
          {{#if (eq node.type "endTime")}}
            <fieldset class="v-group">
              <legend>End Time</legend>

              <div class="v-field">
                <label>endTime (ms)
                  <input type="number"
                         data-config="endTime"
                         data-type="number"
                         value="{{node.config.endTime}}">
                </label>
              </div>

              <div class="v-field">
                <label>endTimePerc (0–1)
                  <input type="number"
                         step="0.05" min="0" max="1"
                         data-config="endTimePerc"
                         data-type="number"
                         value="{{node.config.endTimePerc}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- TIME RANGE (child) --}}
          {{#if (eq node.type "timeRange")}}
            <fieldset class="v-group">
              <legend>Time Range</legend>

              <div class="v-field">
                <label>Start (ms)
                  <input type="number"
                         data-config="start"
                         data-type="number"
                         value="{{node.config.start}}">
                </label>
              </div>

              <div class="v-field">
                <label>End (ms)
                  <input type="number"
                         data-config="end"
                         data-type="number"
                         value="{{node.config.end}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- PRESET (child) --}}
          {{#if (eq node.type "presetSound")}}
            <fieldset class="v-group">
              <legend>Preset</legend>
                    <p><code>.preset("name")</code></p>
                    <p>Applies a preset to the current animation - read the <a href="#/presets">Sequencer Presets article</a> for more information.</p>
              <div class="v-field">
                <label>Preset name
                  <input type="text"
                         data-config="preset"
                         value="{{node.config.preset}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- BASE FOLDER (child) --}}
          {{#if (eq node.type "baseFolder")}}
            <fieldset class="v-group">
              <legend>Base Folder</legend>
              <div class="v-field">
                <label>Base folder path
                  <input type="text"
                         data-config="baseFolder"
                         value="{{node.config.baseFolder}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- SET MUSTACHE (child) --}}
          {{#if (eq node.type "setMustache")}}
            <fieldset class="v-group">
              <legend>Set Mustache</legend>

              <div class="v-field">
                <label>Mustache object (JS literal)
                  <textarea data-config="mustache" rows="4">{{node.config.mustache}}</textarea>
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- ADD OVERRIDE (child) --}}
          {{#if (eq node.type "addOverride")}}
            <fieldset class="v-group">
              <legend>Add Override</legend>
              <p>Función asíncrona ejecutada antes de reproducir el sonido/efecto.</p>
              <div class="v-field">
                <label>Código del override
                  <textarea data-config="body" rows="6">{{node.config.body}}</textarea>
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- VOLUME (child) --}}
          {{#if (eq node.type "volume")}}
            <fieldset class="v-group">
              <legend>Volume</legend>
              <div class="v-field">
                <label>Volume (0–1)
                    <p>A normalized value between <code>0.0</code> and <code>1.0</code> which determines the volume of the sound. Defaults to <code>0.0</code>.</p>
                    <p><strong>Note:</strong> This is affected by each client’s volume settings in Foundry, so if you or your users cannot hear the sound, double check your Interface Volume.</p>
                  <input type="number"
                         step="0.05" min="0" max="1"
                         data-config="volume"
                         data-type="number"
                         value="{{node.config.volume}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- LOCALLY (child) --}}
          {{#if (eq node.type "locally")}}
            <fieldset class="v-group">
              <legend>Locally</legend>
              <div class="v-field">
                <label>
                  <input type="checkbox" data-config="locally" data-type="boolean" {{#if node.config.locally}}checked{{/if}}>
                  Play only locally
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- PLAYIF (child) --}}
          {{#if (eq node.type "playIf")}}
            <fieldset class="v-group">
              <legend>Play If</legend>

              <div class="v-field">
                <label>Mode
                  <select data-config="mode">
                    <option value="always"  {{#if (eq node.config.mode "always")}}selected{{/if}}>Always</option>
                    <option value="boolean" {{#if (eq node.config.mode "boolean")}}selected{{/if}}>Boolean</option>
                    <option value="chance"  {{#if (eq node.config.mode "chance")}}selected{{/if}}>Chance</option>
                  </select>
                </label>
              </div>

              <div class="v-field">
                <label>playIf bool
                  <select data-config="bool">
                    <option value="true"  {{#if node.config.bool}}selected{{/if}}>true</option>
                    <option value="false" {{#unless node.config.bool}}selected{{/unless}}>false</option>
                  </select>
                </label>
              </div>

              <div class="v-field">
                <label>Chance (0–1)
                  <input type="number"
                         step="0.05" min="0" max="1"
                         data-config="chance"
                         data-type="number"
                         value="{{node.config.chance}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- FADE (Opacity) (child) --}}
          {{#if (eq node.type "fade")}}
            <fieldset class="v-group">
              <legend>Fade (Visual)</legend>
              <p><code>.fadeIn(duration, options)</code></p>
              <p><code>.fadeIn(500)</code> or <code>.fadeIn(250, { ease: "easeOutQuint" })</code> or <code>.fadeIn(400, { ease: "easeOutCirc", delay: 100 })</code></p>
              <p>Causes the animation target to fade in its opacity/alpha when played.</p>
              <p>A second options parameter can set the ease of the fade, and the delay before it starts.</p>
              <p>Default parameters: <code>{ ease: "linear", delay: 0 }</code></p>
              <p><strong>Note:</strong> The <code>ease</code> parameters are <em>not</em> supported for tokens due to Foundry removing support for it.</p>
              <p>Check out what easings are available here: <a href="https://easings.net/" target="_blank" rel="noopener">https://easings.net/</a></p>

              {{> v-fade-direction
                  label="Fade In"
                  durKey="fadeInDuration"
                  easeKey="fadeInEase"
                  delayKey="fadeInDelay"
                  config=node.config}}

              <hr>

            <p><code>.fadeOut(duration, options)</code></p>
            <p><code>.fadeOut(500)</code> or <code>.fadeOut(250, { ease: "easeOutQuint" })</code> or <code>.fadeOut(400, { ease: "easeOutCirc", delay: -100 })</code></p>
            <p>Causes the animation target to fade out its opacity/alpha when it has finished playing.</p>
            <p>A second options parameter can set the ease of the fade, and a delay before it ends. E.g. a delay of -500 means the fade will finish 500ms before the end.</p>
            <p>Default parameters: <code>{ ease: "linear", delay: 0 }</code></p>
            <p><strong>Note:</strong> The <code>ease</code> parameters are <em>not</em> supported for tokens due to Foundry removing support for it.</p>
            <p>Check out what easings are available here: <a href="https://easings.net/" target="_blank" rel="noopener">https://easings.net/</a></p>
              {{> v-fade-direction
                  label="Fade Out"
                  durKey="fadeOutDuration"
                  easeKey="fadeOutEase"
                  delayKey="fadeOutDelay"
                  config=node.config}}
            </fieldset>
          {{/if}}

          {{!-- FADE AUDIO (child) --}}
          {{#if (eq node.type "fadeAudio")}}
            <fieldset class="v-group">
              <legend>Fade (Audio)</legend>
              <p><code>.fadeInAudio(duration, options)</code></p>
              <p><code>.fadeInAudio(500)</code> or <code>.fadeInAudio(250, { ease: "easeOutQuint" })</code> or <code>.fadeInAudio(400, { ease: "easeOutCirc", delay: 100 })</code></p>
              <p>Causes the audio on the given section fade in when played.</p>
              <p>A second options parameter can set the ease of the fade, and the delay before it starts.</p>
              <p>Default parameters: <code>{ ease: "linear", delay: 0 }</code></p>
              <p>Check out what easings are available here: <a href="https://easings.net/" target="_blank" rel="noopener">https://easings.net/</a></p>

              {{> v-fade-direction
                  label="Fade In audio"
                  durKey="fadeInDuration"
                  easeKey="fadeInEase"
                  delayKey="fadeInDelay"
                  config=node.config}}

              <hr>
              <p><code>.fadeOutAudio(duration, options)</code></p>
              <p><code>.fadeOutAudio(500)</code> or <code>.fadeOutAudio(250, { ease: "easeOutQuint" })</code> or <code>.fadeOutAudio(400, { ease: "easeOutCirc", delay: -100 })</code></p>
              <p>Causes the section to fade out its audio as it finishes playing.</p>
              <p>A second options parameter can set the ease of the fade, and a delay before it ends. E.g. a delay of -500 means the fade will finish 500ms before the end.</p>
              <p>Default parameters: <code>{ ease: "linear", delay: 0 }</code></p>
              <p>Check out what easings are available here: <a href="https://easings.net/" target="_blank" rel="noopener">https://easings.net/</a></p>

              {{> v-fade-direction
                  label="Fade Out audio"
                  durKey="fadeOutDuration"
                  easeKey="fadeOutEase"
                  delayKey="fadeOutDelay"
                  config=node.config}}
            </fieldset>
          {{/if}}

          {{!-- LOOP OPTIONS (child) --}}
          {{#if (eq node.type "loopOptions")}}
            <fieldset class="v-group">
              <legend>Loop Options</legend>

              <div class="v-field">
                <label>Loop delay (ms)
                  <input type="number"
                         data-config="loopDelay"
                         data-type="number"
                         value="{{node.config.loopDelay}}">
                </label>
              </div>

              <div class="v-field">
                <label>Max loops
                  <input type="number"
                         data-config="maxLoops"
                         data-type="number"
                         value="{{node.config.maxLoops}}">
                </label>
              </div>

              <div class="v-field">
                <label>
                  <input type="checkbox"
                         data-config="endOnLastLoop"
                         data-type="boolean"
                         {{#if node.config.endOnLastLoop}}checked{{/if}}>
                  endOnLastLoop
                </label>
              </div>

              {{!-- FOR USERS (child) --}}
          {{#if (eq node.type "forUsers")}}
            <fieldset class="v-group">
              <legend>For Users</legend>

              <div class="v-field">
                <label>User IDs / names (comma separated)
                  <input type="text"
                         data-config="users"
                         value="{{node.config.users}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- COPY SPRITE (child) --}}
          {{#if (eq node.type "copySprite")}}
            <fieldset class="v-group">
              <legend>Copy Sprite</legend>

              <div class="v-field">
                <label>Modo
                  <select data-config="mode">
                    <option value="selected-token" {{#if (eq node.config.mode "selected-token")}}selected{{/if}}>Token selected</option>
                    <option value="selected-tile"  {{#if (eq node.config.mode "selected-tile")}}selected{{/if}}>Tile selected</option>
                    <option value="token-id"       {{#if (eq node.config.mode "token-id")}}selected{{/if}}>Token ID</option>
                    <option value="tile-id"        {{#if (eq node.config.mode "tile-id")}}selected{{/if}}>Tile ID</option>
                  </select>
                </label>
              </div>

              <div class="v-field">
                <label>Token ID
                  <input type="text"
                         data-config="tokenId"
                         value="{{node.config.tokenId}}">
                </label>
              </div>

              <div class="v-field">
                <label>Tile ID
                  <input type="text"
                         data-config="tileId"
                         value="{{node.config.tileId}}">
                </label>
              </div>

              <div class="v-field">
                <label>Random offset
                  <input type="number"
                         data-config="randomOffset"
                         data-type="number"
                         value="{{node.config.randomOffset}}">
                </label>
              </div>

              <div class="v-field">
                <label>Offset X
                  <input type="number"
                         data-config="offsetX"
                         data-type="number"
                         value="{{node.config.offsetX}}">
                </label>
              </div>

              <div class="v-field">
                <label>Offset Y
                  <input type="number"
                         data-config="offsetY"
                         data-type="number"
                         value="{{node.config.offsetY}}">
                </label>
              </div>

              <div class="v-field">
                <label><input type="checkbox" data-config="cacheLocation" data-type="boolean" {{#if node.config.cacheLocation}}checked{{/if}}> cacheLocation</label>
              </div>

              <div class="v-field">
                <label><input type="checkbox" data-config="local" data-type="boolean" {{#if node.config.local}}checked{{/if}}> local</label>
              </div>

              <div class="v-field">
                <label><input type="checkbox" data-config="gridUnits" data-type="boolean" {{#if node.config.gridUnits}}checked{{/if}}> gridUnits</label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- ATTACH TO (child) --}}
          {{#if (eq node.type "attachTo")}}
            <fieldset class="v-group">
              <legend>Attach To</legend>

              <div class="v-field">
                <label>Modo
                  <select data-config="mode">
                    <option value="selected-token" {{#if (eq node.config.mode "selected-token")}}selected{{/if}}>Token selected</option>
                    <option value="template"       {{#if (eq node.config.mode "template")}}selected{{/if}}>Template</option>
                    <option value="token-id"       {{#if (eq node.config.mode "token-id")}}selected{{/if}}>Token ID</option>
                    <option value="token-name"     {{#if (eq node.config.mode "token-name")}}selected{{/if}}>Token name</option>
                    <option value="name"           {{#if (eq node.config.mode "name")}}selected{{/if}}>Stored name</option>
                  </select>
                </label>
              </div>

              <div class="v-field">
                <label>Token ID
                  <input type="text" data-config="tokenId" value="{{node.config.tokenId}}">
                </label>
              </div>

              <div class="v-field">
                <label>Token name
                  <input type="text" data-config="tokenName" value="{{node.config.tokenName}}">
                </label>
              </div>

              <div class="v-field">
                <label>Stored name
                  <input type="text" data-config="storedName" value="{{node.config.storedName}}">
                </label>
              </div>

              <div class="v-field">
                <label>Align
                  <select data-config="align">
                    <option value="top-left"    {{#if (eq node.config.align "top-left")}}selected{{/if}}>top-left</option>
                    <option value="top"         {{#if (eq node.config.align "top")}}selected{{/if}}>top</option>
                    <option value="top-right"   {{#if (eq node.config.align "top-right")}}selected{{/if}}>top-right</option>
                    <option value="left"        {{#if (eq node.config.align "left")}}selected{{/if}}>left</option>
                    <option value="center"      {{#if (eq node.config.align "center")}}selected{{/if}}>center</option>
                    <option value="right"       {{#if (eq node.config.align "right")}}selected{{/if}}>right</option>
                    <option value="bottom-left" {{#if (eq node.config.align "bottom-left")}}selected{{/if}}>bottom-left</option>
                    <option value="bottom"      {{#if (eq node.config.align "bottom")}}selected{{/if}}>bottom</option>
                    <option value="bottom-right"{{#if (eq node.config.align "bottom-right")}}selected{{/if}}>bottom-right</option>
                  </select>
                </label>
              </div>

              <div class="v-field">
                <label>Edge
                  <select data-config="edge">
                    <option value="inner" {{#if (eq node.config.edge "inner")}}selected{{/if}}>inner</option>
                    <option value="on"    {{#if (eq node.config.edge "on")}}selected{{/if}}>on</option>
                    <option value="outer" {{#if (eq node.config.edge "outer")}}selected{{/if}}>outer</option>
                  </select>
                </label>
              </div>

              <div class="v-field">
                <label>Random offset
                  <input type="number" data-config="randomOffset" data-type="number" value="{{node.config.randomOffset}}">
                </label>
              </div>

              <div class="v-field">
                <label>Offset X
                  <input type="number" data-config="offsetX" data-type="number" value="{{node.config.offsetX}}">
                </label>
              </div>

              <div class="v-field">
                <label>Offset Y
                  <input type="number" data-config="offsetY" data-type="number" value="{{node.config.offsetY}}">
                </label>
              </div>

              <div class="v-field"><label><input type="checkbox" data-config="bindVisibility" data-type="boolean" {{#if node.config.bindVisibility}}checked{{/if}}> bindVisibility</label></div>
              <div class="v-field"><label><input type="checkbox" data-config="bindAlpha" data-type="boolean" {{#if node.config.bindAlpha}}checked{{/if}}> bindAlpha</label></div>
              <div class="v-field"><label><input type="checkbox" data-config="bindScale" data-type="boolean" {{#if node.config.bindScale}}checked{{/if}}> bindScale</label></div>
              <div class="v-field"><label><input type="checkbox" data-config="bindRotation" data-type="boolean" {{#if node.config.bindRotation}}checked{{/if}}> bindRotation</label></div>
              <div class="v-field"><label><input type="checkbox" data-config="local" data-type="boolean" {{#if node.config.local}}checked{{/if}}> local</label></div>
              <div class="v-field"><label><input type="checkbox" data-config="gridUnits" data-type="boolean" {{#if node.config.gridUnits}}checked{{/if}}> gridUnits</label></div>
              <div class="v-field"><label><input type="checkbox" data-config="template" data-type="boolean" {{#if node.config.template}}checked{{/if}}> template</label></div>
            </fieldset>
          {{/if}}

          {{!-- STRETCH TO (child) --}}
          {{#if (eq node.type "stretchTo")}}
            <fieldset class="v-group">
              <legend>Stretch To</legend>

              <div class="v-field">
                <label>Modo
                  <select data-config="mode">
                    <option value="selected-target" {{#if (eq node.config.mode "selected-target")}}selected{{/if}}>Token target</option>
                    <option value="token-id"        {{#if (eq node.config.mode "token-id")}}selected{{/if}}>Token ID</option>
                    <option value="tile-id"         {{#if (eq node.config.mode "tile-id")}}selected{{/if}}>Tile ID</option>
                    <option value="point"           {{#if (eq node.config.mode "point")}}selected{{/if}}>Point (x,y)</option>
                    <option value="name"            {{#if (eq node.config.mode "name")}}selected{{/if}}>Stored name</option>
                  </select>
                </label>
              </div>

              <div class="v-field">
                <label>Token ID
                  <input type="text" data-config="tokenId" value="{{node.config.tokenId}}">
                </label>
              </div>

              <div class="v-field">
                <label>Tile ID
                  <input type="text" data-config="tileId" value="{{node.config.tileId}}">
                </label>
              </div>

              <div class="v-field">
                <label>X
                  <input type="number" data-config="x" data-type="number" value="{{node.config.x}}">
                </label>
              </div>

              <div class="v-field">
                <label>Y
                  <input type="number" data-config="y" data-type="number" value="{{node.config.y}}">
                </label>
              </div>

              <div class="v-field">
                <label>Stored name
                  <input type="text" data-config="storedName" value="{{node.config.storedName}}">
                </label>
              </div>

              <div class="v-field">
                <label>Random offset
                  <input type="number" data-config="randomOffset" data-type="number" value="{{node.config.randomOffset}}">
                </label>
              </div>

              <div class="v-field">
                <label>Offset X
                  <input type="number" data-config="offsetX" data-type="number" value="{{node.config.offsetX}}">
                </label>
              </div>

              <div class="v-field">
                <label>Offset Y
                  <input type="number" data-config="offsetY" data-type="number" value="{{node.config.offsetY}}">
                </label>
              </div>

              <div class="v-field"><label><input type="checkbox" data-config="cacheLocation" data-type="boolean" {{#if node.config.cacheLocation}}checked{{/if}}> cacheLocation</label></div>
              <div class="v-field"><label><input type="checkbox" data-config="attachTo" data-type="boolean" {{#if node.config.attachTo}}checked{{/if}}> attachTo</label></div>
              <div class="v-field"><label><input type="checkbox" data-config="onlyX" data-type="boolean" {{#if node.config.onlyX}}checked{{/if}}> onlyX</label></div>
              <div class="v-field"><label><input type="checkbox" data-config="tiling" data-type="boolean" {{#if node.config.tiling}}checked{{/if}}> tiling</label></div>
              <div class="v-field"><label><input type="checkbox" data-config="local" data-type="boolean" {{#if node.config.local}}checked{{/if}}> local</label></div>
              <div class="v-field"><label><input type="checkbox" data-config="gridUnits" data-type="boolean" {{#if node.config.gridUnits}}checked{{/if}}> gridUnits</label></div>
              <div class="v-field"><label><input type="checkbox" data-config="requiresLineOfSight" data-type="boolean" {{#if node.config.requiresLineOfSight}}checked{{/if}}> requiresLineOfSight</label></div>
              <div class="v-field"><label><input type="checkbox" data-config="hideLineOfSight" data-type="boolean" {{#if node.config.hideLineOfSight}}checked{{/if}}> hideLineOfSight</label></div>
            </fieldset>
          {{/if}}

          {{!-- SPRITE OFFSET (child) --}}
          {{#if (eq node.type "spriteOffset")}}
            <fieldset class="v-group">
              <legend>Sprite Offset</legend>

              <div class="v-field">
                <label>Offset X
                  <input type="number" data-config="x" data-type="number" value="{{node.config.x}}">
                </label>
              </div>

              <div class="v-field">
                <label>Offset Y
                  <input type="number" data-config="y" data-type="number" value="{{node.config.y}}">
                </label>
              </div>

              <div class="v-field"><label><input type="checkbox" data-config="gridUnits" data-type="boolean" {{#if node.config.gridUnits}}checked{{/if}}> gridUnits</label></div>
              <div class="v-field"><label><input type="checkbox" data-config="local" data-type="boolean" {{#if node.config.local}}checked{{/if}}> local</label></div>
            </fieldset>
          {{/if}}

          {{!-- RANDOM SPRITE ROTATION (child) --}}
          {{#if (eq node.type "randomSpriteRotation")}}
            <fieldset class="v-group">
              <legend>Random Sprite Rotation</legend>
              <div class="v-field"><label><input type="checkbox" data-config="enabled" data-type="boolean" {{#if node.config.enabled}}checked{{/if}}> enabled</label></div>
            </fieldset>
          {{/if}}

          {{!-- ZERO SPRITE ROTATION (child) --}}
          {{#if (eq node.type "zeroSpriteRotation")}}
            <fieldset class="v-group">
              <legend>Zero Sprite Rotation</legend>
              <div class="v-field"><label><input type="checkbox" data-config="enabled" data-type="boolean" {{#if node.config.enabled}}checked{{/if}}> enabled</label></div>
            </fieldset>
          {{/if}}

          {{!-- PERSIST (child) --}}
          {{#if (eq node.type "persist")}}
            <fieldset class="v-group">
              <legend>Persist</legend>

              <div class="v-field"><label><input type="checkbox" data-config="enabled" data-type="boolean" {{#if node.config.enabled}}checked{{/if}}> enabled</label></div>
              <div class="v-field"><label><input type="checkbox" data-config="persistTokenPrototype" data-type="boolean" {{#if node.config.persistTokenPrototype}}checked{{/if}}> persistTokenPrototype</label></div>
            </fieldset>
          {{/if}}

          {{!-- TEMPORARY (child) --}}
          {{#if (eq node.type "temporary")}}
            <fieldset class="v-group">
              <legend>Temporary</legend>
              <div class="v-field"><label><input type="checkbox" data-config="enabled" data-type="boolean" {{#if node.config.enabled}}checked{{/if}}> enabled</label></div>
            </fieldset>
          {{/if}}

          {{!-- EXTRA END DURATION (child) --}}
          {{#if (eq node.type "extraEndDuration")}}
            <fieldset class="v-group">
              <legend>Extra End Duration</legend>

              <div class="v-field">
                <label>Duration (ms)
                  <input type="number" data-config="duration" data-type="number" value="{{node.config.duration}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- ORIGIN (child) --}}
          {{#if (eq node.type "origin")}}
            <fieldset class="v-group">
              <legend>Origin</legend>
              <div class="v-field">
                <label>UUID / origin
                  <input type="text" data-config="origin" value="{{node.config.origin}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- NAME (child) --}}
          {{#if (eq node.type "name")}}
            <fieldset class="v-group">
              <legend>Name</legend>
              <div class="v-field">
                <label>Name
                  <input type="text" data-config="name" value="{{node.config.name}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- PRIVATE (child) --}}
          {{#if (eq node.type "private")}}
            <fieldset class="v-group">
              <legend>Private</legend>
              <div class="v-field"><label><input type="checkbox" data-config="enabled" data-type="boolean" {{#if node.config.enabled}}checked{{/if}}> enabled</label></div>
            </fieldset>
          {{/if}}

          {{!-- MISSED (child) --}}
          {{#if (eq node.type "missed")}}
            <fieldset class="v-group">
              <legend>Missed</legend>
              <div class="v-field"><label><input type="checkbox" data-config="enabled" data-type="boolean" {{#if node.config.enabled}}checked{{/if}}> enabled</label></div>
            </fieldset>
          {{/if}}

          {{!-- SIZE (child) --}}
          {{#if (eq node.type "size")}}
            <fieldset class="v-group">
              <legend>Size</legend>

              <div class="v-field">
                <label>Width
                  <input type="number" data-config="width" data-type="number" value="{{node.config.width}}">
                </label>
              </div>

              <div class="v-field">
                <label>Height
                  <input type="number" data-config="height" data-type="number" value="{{node.config.height}}">
                </label>
              </div>

              <div class="v-field"><label><input type="checkbox" data-config="gridUnits" data-type="boolean" {{#if node.config.gridUnits}}checked{{/if}}> gridUnits</label></div>
            </fieldset>
          {{/if}}

          {{!-- TEMPLATE OPTIONS (child) --}}
          {{#if (eq node.type "templateOpts")}}
            <fieldset class="v-group">
              <legend>Template</legend>

              <div class="v-field">
                <label>Grid size
                  <input type="number" data-config="gridSize" data-type="number" value="{{node.config.gridSize}}">
                </label>
              </div>

              <div class="v-field">
                <label>Start point
                  <input type="number" data-config="startPoint" data-type="number" value="{{node.config.startPoint}}">
                </label>
              </div>

              <div class="v-field">
                <label>End point
                  <input type="number" data-config="endPoint" data-type="number" value="{{node.config.endPoint}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- SCALE (child) --}}
          {{#if (eq node.type "scale")}}
            <fieldset class="v-group">
              <legend>Scale</legend>

              <div class="v-field">
                <label>Mode
                  <select data-config="mode">
                    <option value="uniform" {{#if (eq node.config.mode "uniform")}}selected{{/if}}>Uniform</option>
                    <option value="object"  {{#if (eq node.config.mode "object")}}selected{{/if}}>Object</option>
                    <option value="random"  {{#if (eq node.config.mode "random")}}selected{{/if}}>Random</option>
                  </select>
                </label>
              </div>

              <div class="v-field">
                <label>Scale (uniform)
                  <input type="number" data-config="scale" data-type="number" value="{{node.config.scale}}">
                </label>
              </div>

              <div class="v-field">
                <label>Scale X
                  <input type="number" data-config="scaleX" data-type="number" value="{{node.config.scaleX}}">
                </label>
              </div>

              <div class="v-field">
                <label>Scale Y
                  <input type="number" data-config="scaleY" data-type="number" value="{{node.config.scaleY}}">
                </label>
              </div>

              <div class="v-field">
                <label>Random min
                  <input type="number" data-config="min" data-type="number" value="{{node.config.min}}">
                </label>
              </div>

              <div class="v-field">
                <label>Random max
                  <input type="number" data-config="max" data-type="number" value="{{node.config.max}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- SCALE IN (child) --}}
          {{#if (eq node.type "scaleIn")}}
            <fieldset class="v-group">
              <legend>Scale In</legend>

              <div class="v-field">
                <label>Scale
                  <input type="number" data-config="scale" data-type="number" value="{{node.config.scale}}">
                </label>
              </div>

              <div class="v-field">
                <label>Scale X
                  <input type="number" data-config="scaleX" data-type="number" value="{{node.config.scaleX}}">
                </label>
              </div>

              <div class="v-field">
                <label>Scale Y
                  <input type="number" data-config="scaleY" data-type="number" value="{{node.config.scaleY}}">
                </label>
              </div>

              <div class="v-field">
                <label>Duration (ms)
                  <input type="number" data-config="duration" data-type="number" value="{{node.config.duration}}">
                </label>
              </div>

              <div class="v-field">
                <label>Ease
                  <input type="text" data-config="ease" value="{{node.config.ease}}">
                </label>
              </div>

              <div class="v-field">
                <label>Delay (ms)
                  <input type="number" data-config="delay" data-type="number" value="{{node.config.delay}}">
                </label>
              </div>

              <div class="v-field"><label><input type="checkbox" data-config="isObject" data-type="boolean" {{#if node.config.isObject}}checked{{/if}}> scale as object</label></div>
            </fieldset>
          {{/if}}

          {{!-- SCALE OUT (child) --}}
          {{#if (eq node.type "scaleOut")}}
            <fieldset class="v-group">
              <legend>Scale Out</legend>

              <div class="v-field">
                <label>Scale
                  <input type="number" data-config="scale" data-type="number" value="{{node.config.scale}}">
                </label>
              </div>

              <div class="v-field">
                <label>Scale X
                  <input type="number" data-config="scaleX" data-type="number" value="{{node.config.scaleX}}">
                </label>
              </div>

              <div class="v-field">
                <label>Scale Y
                  <input type="number" data-config="scaleY" data-type="number" value="{{node.config.scaleY}}">
                </label>
              </div>

              <div class="v-field">
                <label>Duration (ms)
                  <input type="number" data-config="duration" data-type="number" value="{{node.config.duration}}">
                </label>
              </div>

              <div class="v-field">
                <label>Ease
                  <input type="text" data-config="ease" value="{{node.config.ease}}">
                </label>
              </div>

              <div class="v-field">
                <label>Delay (ms)
                  <input type="number" data-config="delay" data-type="number" value="{{node.config.delay}}">
                </label>
              </div>

              <div class="v-field"><label><input type="checkbox" data-config="isObject" data-type="boolean" {{#if node.config.isObject}}checked{{/if}}> scale as object</label></div>
            </fieldset>
          {{/if}}

          {{!-- SCALE TO OBJECT (child) --}}
          {{#if (eq node.type "scaleToObject")}}
            <fieldset class="v-group">
              <legend>Scale To Object</legend>

              <div class="v-field">
                <label>Multiplier
                  <input type="number" data-config="multiplier" data-type="number" value="{{node.config.multiplier}}">
                </label>
              </div>

              <div class="v-field"><label><input type="checkbox" data-config="uniform" data-type="boolean" {{#if node.config.uniform}}checked{{/if}}> uniform</label></div>
              <div class="v-field"><label><input type="checkbox" data-config="considerTokenScale" data-type="boolean" {{#if node.config.considerTokenScale}}checked{{/if}}> considerTokenScale</label></div>
            </fieldset>
          {{/if}}

          {{!-- SPRITE SCALE (child) --}}
          {{#if (eq node.type "spriteScale")}}
            <fieldset class="v-group">
              <legend>Sprite Scale</legend>

              <div class="v-field">
                <label>Mode
                  <select data-config="mode">
                    <option value="uniform" {{#if (eq node.config.mode "uniform")}}selected{{/if}}>Uniform</option>
                    <option value="object"  {{#if (eq node.config.mode "object")}}selected{{/if}}>Object</option>
                    <option value="random"  {{#if (eq node.config.mode "random")}}selected{{/if}}>Random</option>
                  </select>
                </label>
              </div>

              <div class="v-field">
                <label>Scale (uniform)
                  <input type="number" data-config="scale" data-type="number" value="{{node.config.scale}}">
                </label>
              </div>

              <div class="v-field">
                <label>Scale X
                  <input type="number" data-config="scaleX" data-type="number" value="{{node.config.scaleX}}">
                </label>
              </div>

              <div class="v-field">
                <label>Scale Y
                  <input type="number" data-config="scaleY" data-type="number" value="{{node.config.scaleY}}">
                </label>
              </div>

              <div class="v-field">
                <label>Random min
                  <input type="number" data-config="min" data-type="number" value="{{node.config.min}}">
                </label>
              </div>

              <div class="v-field">
                <label>Random max
                  <input type="number" data-config="max" data-type="number" value="{{node.config.max}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- ANCHOR (child) --}}
          {{#if (eq node.type "anchor")}}
            <fieldset class="v-group">
              <legend>Anchor</legend>

              <div class="v-field">
                <label>Mode
                  <select data-config="mode">
                    <option value="uniform" {{#if (eq node.config.mode "uniform")}}selected{{/if}}>Uniform</option>
                    <option value="object"  {{#if (eq node.config.mode "object")}}selected{{/if}}>Object</option>
                  </select>
                </label>
              </div>

              <div class="v-field">
                <label>Anchor
                  <input type="number" data-config="anchor" data-type="number" value="{{node.config.anchor}}">
                </label>
              </div>

              <div class="v-field">
                <label>Anchor X
                  <input type="number" data-config="x" data-type="number" value="{{node.config.x}}">
                </label>
              </div>

              <div class="v-field">
                <label>Anchor Y
                  <input type="number" data-config="y" data-type="number" value="{{node.config.y}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- SPRITE ANCHOR (child) --}}
          {{#if (eq node.type "spriteAnchor")}}
            <fieldset class="v-group">
              <legend>Sprite Anchor</legend>

              <div class="v-field">
                <label>Mode
                  <select data-config="mode">
                    <option value="uniform" {{#if (eq node.config.mode "uniform")}}selected{{/if}}>Uniform</option>
                    <option value="object"  {{#if (eq node.config.mode "object")}}selected{{/if}}>Object</option>
                  </select>
                </label>
              </div>

              <div class="v-field">
                <label>Anchor
                  <input type="number" data-config="anchor" data-type="number" value="{{node.config.anchor}}">
                </label>
              </div>

              <div class="v-field">
                <label>Anchor X
                  <input type="number" data-config="x" data-type="number" value="{{node.config.x}}">
                </label>
              </div>

              <div class="v-field">
                <label>Anchor Y
                  <input type="number" data-config="y" data-type="number" value="{{node.config.y}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- CENTER (child) --}}
          {{#if (eq node.type "center")}}
            <fieldset class="v-group">
              <legend>Center</legend>
            </fieldset>
          {{/if}}

          {{!-- MIRROR (child) --}}
          {{#if (eq node.type "mirror")}}
            <fieldset class="v-group">
              <legend>Mirror</legend>
              <div class="v-field"><label><input type="checkbox" data-config="mirrorX" data-type="boolean" {{#if node.config.mirrorX}}checked{{/if}}> mirrorX</label></div>
              <div class="v-field"><label><input type="checkbox" data-config="mirrorY" data-type="boolean" {{#if node.config.mirrorY}}checked{{/if}}> mirrorY</label></div>
              <div class="v-field"><label><input type="checkbox" data-config="randomMirrorX" data-type="boolean" {{#if node.config.randomMirrorX}}checked{{/if}}> randomizeMirrorX</label></div>
              <div class="v-field"><label><input type="checkbox" data-config="randomMirrorY" data-type="boolean" {{#if node.config.randomMirrorY}}checked{{/if}}> randomizeMirrorY</label></div>
            </fieldset>
          {{/if}}

          {{!-- SPRITE ROTATION (child) --}}
          {{#if (eq node.type "spriteRotation")}}
            <fieldset class="v-group">
              <legend>Sprite Rotation</legend>
              <div class="v-field">
                <label>Rotation (deg)
                  <input type="number" data-config="rotation" data-type="number" value="{{node.config.rotation}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- RANDOM ROTATION (child) --}}
          {{#if (eq node.type "randomRotation")}}
            <fieldset class="v-group">
              <legend>Random Rotation</legend>
              <div class="v-field"><label><input type="checkbox" data-config="enabled" data-type="boolean" {{#if node.config.enabled}}checked{{/if}}> enabled</label></div>
            </fieldset>
          {{/if}}

          {{!-- PLAYBACK RATE (child) --}}
          {{#if (eq node.type "playbackRate")}}
            <fieldset class="v-group">
              <legend>Playback Rate</legend>
              <div class="v-field">
                <label>Rate
                  <input type="number" data-config="rate" data-type="number" value="{{node.config.rate}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- LAYERING (child) --}}
          {{#if (eq node.type "layering")}}
            <fieldset class="v-group">
              <legend>Layering</legend>

              <div class="v-field"><label><input type="checkbox" data-config="belowTokens" data-type="boolean" {{#if node.config.belowTokens}}checked{{/if}}> belowTokens</label></div>
              <div class="v-field"><label><input type="checkbox" data-config="belowTiles" data-type="boolean" {{#if node.config.belowTiles}}checked{{/if}}> belowTiles</label></div>
              <div class="v-field"><label><input type="checkbox" data-config="aboveLighting" data-type="boolean" {{#if node.config.aboveLighting}}checked{{/if}}> aboveLighting</label></div>
              <div class="v-field"><label><input type="checkbox" data-config="aboveInterface" data-type="boolean" {{#if node.config.aboveInterface}}checked{{/if}}> aboveInterface</label></div>

              <div class="v-field">
                <label>Z-Index
                  <input type="number" data-config="zIndex" data-type="number" value="{{node.config.zIndex}}">
                </label>
              </div>

              <div class="v-field">
                <label>Sort layer
                  <input type="number" data-config="sortLayer" data-type="number" value="{{node.config.sortLayer}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- ANIMATE PROPERTY (child) --}}
          {{#if (eq node.type "animateProperty")}}
            <fieldset class="v-group">
              <legend>Animate Property</legend>

              <div class="v-field">
                <label>Target
                  <input type="text" data-config="target" value="{{node.config.target}}">
                </label>
              </div>

              <div class="v-field">
                <label>Property
                  <input type="text" data-config="property" value="{{node.config.property}}">
                </label>
              </div>

              <div class="v-field">
                <label>From
                  <input type="number" data-config="from" data-type="number" value="{{node.config.from}}">
                </label>
              </div>

              <div class="v-field">
                <label>To
                  <input type="number" data-config="to" data-type="number" value="{{node.config.to}}">
                </label>
              </div>

              <div class="v-field">
                <label>Duration
                  <input type="number" data-config="duration" data-type="number" value="{{node.config.duration}}">
                </label>
              </div>

              <div class="v-field">
                <label>Ease
                  <input type="text" data-config="ease" value="{{node.config.ease}}">
                </label>
              </div>

              <div class="v-field">
                <label>Delay
                  <input type="number" data-config="delay" data-type="number" value="{{node.config.delay}}">
                </label>
              </div>

              <div class="v-field"><label><input type="checkbox" data-config="gridUnits" data-type="boolean" {{#if node.config.gridUnits}}checked{{/if}}> gridUnits</label></div>
              <div class="v-field"><label><input type="checkbox" data-config="fromEnd" data-type="boolean" {{#if node.config.fromEnd}}checked{{/if}}> fromEnd</label></div>
              <div class="v-field"><label><input type="checkbox" data-config="absolute" data-type="boolean" {{#if node.config.absolute}}checked{{/if}}> absolute</label></div>
            </fieldset>
          {{/if}}

          {{!-- LOOP PROPERTY (child) --}}
          {{#if (eq node.type "loopProperty")}}
            <fieldset class="v-group">
              <legend>Loop Property</legend>

              <div class="v-field">
                <label>Target
                  <input type="text" data-config="target" value="{{node.config.target}}">
                </label>
              </div>

              <div class="v-field">
                <label>Property
                  <input type="text" data-config="property" value="{{node.config.property}}">
                </label>
              </div>

              <div class="v-field">
                <label>From
                  <input type="number" data-config="from" data-type="number" value="{{node.config.from}}">
                </label>
              </div>

              <div class="v-field">
                <label>To
                  <input type="number" data-config="to" data-type="number" value="{{node.config.to}}">
                </label>
              </div>

              <div class="v-field">
                <label>Duration
                  <input type="number" data-config="duration" data-type="number" value="{{node.config.duration}}">
                </label>
              </div>

              <div class="v-field">
                <label>Ease
                  <input type="text" data-config="ease" value="{{node.config.ease}}">
                </label>
              </div>

              <div class="v-field">
                <label>Delay
                  <input type="number" data-config="delay" data-type="number" value="{{node.config.delay}}">
                </label>
              </div>

              <div class="v-field">
                <label>Loops
                  <input type="number" data-config="loops" data-type="number" value="{{node.config.loops}}">
                </label>
              </div>

              <div class="v-field"><label><input type="checkbox" data-config="pingPong" data-type="boolean" {{#if node.config.pingPong}}checked{{/if}}> pingPong</label></div>
              <div class="v-field"><label><input type="checkbox" data-config="gridUnits" data-type="boolean" {{#if node.config.gridUnits}}checked{{/if}}> gridUnits</label></div>
            </fieldset>
          {{/if}}

          {{!-- FILTER (child) --}}
          {{#if (eq node.type "filter")}}
            <fieldset class="v-group">
              <legend>Filter</legend>

              <div class="v-field">
                <label>Filter name
                  <input type="text" data-config="filter" value="{{node.config.filter}}">
                </label>
              </div>

              <div class="v-field">
                <label>Options (JSON)
                  <textarea data-config="options" rows="6">{{node.config.options}}</textarea>
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- TEXT (child) --}}
          {{#if (eq node.type "text")}}
            <fieldset class="v-group">
              <legend>Text</legend>

              <div class="v-field">
                <label>Text
                  <input type="text" data-config="text" value="{{node.config.text}}">
                </label>
              </div>

              <div class="v-field">
                <label>Style (JSON)
                  <textarea data-config="style" rows="6">{{node.config.style}}</textarea>
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- SHAPE (child) --}}
          {{#if (eq node.type "shape")}}
            <fieldset class="v-group">
              <legend>Shape</legend>

              <div class="v-field">
                <label>Type
                  <input type="text" data-config="type" value="{{node.config.type}}">
                </label>
              </div>

              <div class="v-field">
                <label>Options (JSON)
                  <textarea data-config="options" rows="6">{{node.config.options}}</textarea>
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- XRAY (child) --}}
          {{#if (eq node.type "xray")}}
            <fieldset class="v-group">
              <legend>XRay</legend>
              <div class="v-field"><label><input type="checkbox" data-config="enabled" data-type="boolean" {{#if node.config.enabled}}checked{{/if}}> enabled</label></div>
            </fieldset>
          {{/if}}

          {{!-- MASK (child) --}}
          {{#if (eq node.type "mask")}}
            <fieldset class="v-group">
              <legend>Mask</legend>

              <div class="v-field">
                <label>Mode
                  <select data-config="mode">
                    <option value="source" {{#if (eq node.config.mode "source")}}selected{{/if}}>Source</option>
                    <option value="ids"    {{#if (eq node.config.mode "ids")}}selected{{/if}}>IDs</option>
                  </select>
                </label>
              </div>

              <div class="v-field">
                <label>IDs (comma separated)
                  <input type="text" data-config="ids" value="{{node.config.ids}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- TIE TO DOCUMENTS (child) --}}
          {{#if (eq node.type "tieToDocuments")}}
            <fieldset class="v-group">
              <legend>Tie To Documents</legend>
              <div class="v-field">
                <label>UUIDs (comma separated)
                  <input type="text" data-config="uuids" value="{{node.config.uuids}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- SYNC GROUP (child) --}}
          {{#if (eq node.type "syncGroup")}}
            <fieldset class="v-group">
              <legend>Sync Group</legend>
              <div class="v-field">
                <label>Name
                  <input type="text" data-config="name" value="{{node.config.name}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- ISOMETRIC (child) --}}
          {{#if (eq node.type "isometric")}}
            <fieldset class="v-group">
              <legend>Isometric</legend>
              <div class="v-field"><label><input type="checkbox" data-config="overlay" data-type="boolean" {{#if node.config.overlay}}checked{{/if}}> overlay</label></div>
            </fieldset>
          {{/if}}

          {{!-- SCREEN SPACE (child) --}}
          {{#if (eq node.type "screenSpace")}}
            <fieldset class="v-group">
              <legend>Screen Space</legend>

              <div class="v-field"><label><input type="checkbox" data-config="screenSpace" data-type="boolean" {{#if node.config.screenSpace}}checked{{/if}}> screenSpace</label></div>
              <div class="v-field"><label><input type="checkbox" data-config="aboveUI" data-type="boolean" {{#if node.config.aboveUI}}checked{{/if}}> aboveUI</label></div>

              <div class="v-field">
                <label>Anchor X
                  <input type="number" data-config="anchorX" data-type="number" value="{{node.config.anchorX}}">
                </label>
              </div>

              <div class="v-field">
                <label>Anchor Y
                  <input type="number" data-config="anchorY" data-type="number" value="{{node.config.anchorY}}">
                </label>
              </div>

              <div class="v-field">
                <label>Anchor (uniform)
                  <input type="number" data-config="anchor" data-type="number" value="{{node.config.anchor}}">
                </label>
              </div>

              <div class="v-field">
                <label>Position X
                  <input type="number" data-config="posX" data-type="number" value="{{node.config.posX}}">
                </label>
              </div>

              <div class="v-field">
                <label>Position Y
                  <input type="number" data-config="posY" data-type="number" value="{{node.config.posY}}">
                </label>
              </div>

              <div class="v-field">
                <label>Scale X
                  <input type="number" data-config="scaleX" data-type="number" value="{{node.config.scaleX}}">
                </label>
              </div>

              <div class="v-field">
                <label>Scale Y
                  <input type="number" data-config="scaleY" data-type="number" value="{{node.config.scaleY}}">
                </label>
              </div>

              <div class="v-field"><label><input type="checkbox" data-config="fitX" data-type="boolean" {{#if node.config.fitX}}checked{{/if}}> fitX</label></div>
              <div class="v-field"><label><input type="checkbox" data-config="fitY" data-type="boolean" {{#if node.config.fitY}}checked{{/if}}> fitY</label></div>
              <div class="v-field"><label><input type="checkbox" data-config="ratioX" data-type="boolean" {{#if node.config.ratioX}}checked{{/if}}> ratioX</label></div>
              <div class="v-field"><label><input type="checkbox" data-config="ratioY" data-type="boolean" {{#if node.config.ratioY}}checked{{/if}}> ratioY</label></div>
            </fieldset>
          {{/if}}
            </fieldset>
          {{/if}}

          {{!-- RADIUS (sound child) --}}
          {{#if (eq node.type "radius")}}
            <fieldset class="v-group">
              <legend>Radius</legend>
              <div class="v-field">
                <label>Radius (scene units)
                  <input type="number" data-config="radius" data-type="number" value="{{node.config.radius}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- CONSTRAINED BY WALLS (sound child) --}}
          {{#if (eq node.type "constrainedByWalls")}}
            <fieldset class="v-group">
              <legend>Constrained By Walls</legend>
              <div class="v-field">
                <label><input type="checkbox" data-config="constrainedByWalls" data-type="boolean" {{#if node.config.constrainedByWalls}}checked{{/if}}> constrainedByWalls</label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- DISTANCE EASING (sound child) --}} 
          {{#if (eq node.type "distanceEasing")}}
            <fieldset class="v-group">
              <legend>Distance Easing</legend>
              <div class="v-field">
                <label>Apply easing by distance
                  <select data-config="distanceEasing">
                    <option value="true"  {{#if node.config.distanceEasing}}selected{{/if}}>true</option>
                    <option value="false" {{#unless node.config.distanceEasing}}selected{{/unless}}>false</option>
                  </select>
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- AUDIO CHANNEL (sound child) --}}
          {{#if (eq node.type "audioChannel")}}
            <fieldset class="v-group">
              <legend>Audio Channel</legend>
              <div class="v-field">
                <label>Channel name
                  <input type="text" data-config="audioChannel" value="{{node.config.audioChannel}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- ALWAYS FOR GMS (sound child) --}}
          {{#if (eq node.type "alwaysForGMs")}}
            <fieldset class="v-group">
              <legend>Always For GMs</legend>
              <div class="v-field">
                <label><input type="checkbox" data-config="alwaysForGMs" data-type="boolean" {{#if node.config.alwaysForGMs}}checked{{/if}}> alwaysForGMs</label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- BASE EFFECT (sound child) --}}
          {{#if (eq node.type "baseEffect")}}
            <fieldset class="v-group">
              <legend>Base Effect</legend>
              <div class="v-field">
                <label>Type
                  <select data-config="type">
                    <option value="" {{#unless node.config.type}}selected{{/unless}}>-</option>
                    <option value="lowpass"  {{#if (eq node.config.type "lowpass")}}selected{{/if}}>lowpass</option>
                    <option value="highpass" {{#if (eq node.config.type "highpass")}}selected{{/if}}>highpass</option>
                    <option value="reverb"   {{#if (eq node.config.type "reverb")}}selected{{/if}}>reverb</option>
                  </select>
                </label>
              </div>
              <div class="v-field">
                <label>Intensity
                  <input type="number" data-config="intensity" data-type="number" value="{{node.config.intensity}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- MUFFLED EFFECT (sound child) --}}
          {{#if (eq node.type "muffledEffect")}}
            <fieldset class="v-group">
              <legend>Muffled Effect</legend>
              <div class="v-field">
                <label>Type
                  <select data-config="type">
                    <option value="" {{#unless node.config.type}}selected{{/unless}}>-</option>
                    <option value="lowpass"  {{#if (eq node.config.type "lowpass")}}selected{{/if}}>lowpass</option>
                    <option value="highpass" {{#if (eq node.config.type "highpass")}}selected{{/if}}>highpass</option>
                    <option value="reverb"   {{#if (eq node.config.type "reverb")}}selected{{/if}}>reverb</option>
                  </select>
                </label>
              </div>
              <div class="v-field">
                <label>Intensity
                  <input type="number" data-config="intensity" data-type="number" value="{{node.config.intensity}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- SCROLLING TEXT DIRECTION (child) --}}
          {{#if (eq node.type "direction")}}
            <fieldset class="v-group">
              <legend>Direction</legend>
              <div class="v-field">
                <label>Direction / Anchor
                  <input type="text" data-config="direction" value="{{node.config.direction}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- SCROLLING TEXT JITTER (child) --}}
          {{#if (eq node.type "scrollingTextJitter")}}
            <fieldset class="v-group">
              <legend>Jitter</legend>
              <div class="v-field">
                <label>Random offset (0-1)
                  <input type="number" step="0.05" min="0" max="1" data-config="jitter" data-type="number" value="{{node.config.jitter}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- CANVAS PAN LOCK VIEW (child) --}}
          {{#if (eq node.type "canvasPanLockView")}}
            <fieldset class="v-group">
              <legend>Lock View</legend>
              <div class="v-field">
                <label>Duration (ms)
                  <input type="number" data-config="lockMs" data-type="number" value="{{node.config.lockMs}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- CANVAS PAN SPEED (child) --}}
          {{#if (eq node.type "canvasPanSpeed")}}
            <fieldset class="v-group">
              <legend>Speed</legend>
              <div class="v-field">
                <label>Pixels per second
                  <input type="number" data-config="speed" data-type="number" value="{{node.config.speed}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- CANVAS PAN SHAKE (child) --}}
          {{#if (eq node.type "canvasPanShake")}}
            <fieldset class="v-group">
              <legend>Canvas Shake</legend>
              <div class="v-field">
                <label>Duration (ms)
                  <input type="number" data-config="duration" data-type="number" value="{{node.config.duration}}">
                </label>
              </div>
              <div class="v-field">
                <label>Strength
                  <input type="number" data-config="strength" data-type="number" value="{{node.config.strength}}">
                </label>
              </div>
              <div class="v-field">
                <label>Frequency (ms)
                  <input type="number" data-config="frequency" data-type="number" value="{{node.config.frequency}}">
                </label>
              </div>
              <div class="v-field">
                <label>Fade in (ms)
                  <input type="number" data-config="fadeInDuration" data-type="number" value="{{node.config.fadeInDuration}}">
                </label>
              </div>
              <div class="v-field">
                <label>Fade out (ms)
                  <input type="number" data-config="fadeOutDuration" data-type="number" value="{{node.config.fadeOutDuration}}">
                </label>
              </div>
              <div class="v-field">
                <label>
                  <input type="checkbox" data-config="rotation" data-type="boolean" {{#if node.config.rotation}}checked{{/if}}>
                  Enable rotation shake
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- CROSSHAIR NAME (child) --}}
          {{#if (eq node.type "crosshairName")}}
            <fieldset class="v-group">
              <legend>Crosshair Name</legend>
              <div class="v-field">
                <label>Name
                  <input type="text" data-config="name" value="{{node.config.name}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- CROSSHAIR TYPE (child) --}}
          {{#if (eq node.type "crosshairType")}}
            <fieldset class="v-group">
              <legend>Crosshair Type</legend>
              <div class="v-field">
                <label>Type
                  <input type="text" data-config="type" value="{{node.config.type}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- CROSSHAIR LABEL (child) --}}
          {{#if (eq node.type "crosshairLabel")}}
            <fieldset class="v-group">
              <legend>Crosshair Label</legend>
              <div class="v-field">
                <label>Label
                  <input type="text" data-config="label" value="{{node.config.label}}">
                </label>
              </div>
              <div class="v-field grid-2">
                <label>dx
                  <input type="number" data-config="dx" data-type="number" value="{{node.config.dx}}">
                </label>
                <label>dy
                  <input type="number" data-config="dy" data-type="number" value="{{node.config.dy}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- CROSSHAIR SNAP POSITION (child) --}}
          {{#if (eq node.type "crosshairSnapPosition")}}
            <fieldset class="v-group">
              <legend>Snap Position</legend>
              <div class="v-field">
                <label>Mode / Value
                  <input type="text" data-config="snapPosition" value="{{node.config.snapPosition}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- CROSSHAIR DISTANCE (child) --}}
          {{#if (eq node.type "crosshairDistance")}}
            <fieldset class="v-group">
              <legend>Distance / Radius</legend>
              <div class="v-field">
                <label>Distance
                  <input type="number" data-config="distance" data-type="number" value="{{node.config.distance}}">
                </label>
              </div>
              <div class="v-field grid-2">
                <label>Min
                  <input type="number" data-config="min" data-type="number" value="{{node.config.min}}">
                </label>
                <label>Max
                  <input type="number" data-config="max" data-type="number" value="{{node.config.max}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- CROSSHAIR ANGLE (child) --}}
          {{#if (eq node.type "crosshairAngle")}}
            <fieldset class="v-group">
              <legend>Angle</legend>
              <div class="v-field">
                <label>Angle (deg)
                  <input type="number" data-config="angle" data-type="number" value="{{node.config.angle}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- CROSSHAIR WIDTH (child) --}}
          {{#if (eq node.type "crosshairWidth")}}
            <fieldset class="v-group">
              <legend>Width</legend>
              <div class="v-field">
                <label>Width
                  <input type="number" data-config="width" data-type="number" value="{{node.config.width}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- CROSSHAIR SNAP DIRECTION (child) --}}
          {{#if (eq node.type "crosshairSnapDirection")}}
            <fieldset class="v-group">
              <legend>Snap Direction</legend>
              <div class="v-field">
                <label>Increment (deg)
                  <input type="number" data-config="snapDirection" data-type="number" value="{{node.config.snapDirection}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- CROSSHAIR LOCK MANUAL ROTATION (child) --}}
          {{#if (eq node.type "crosshairLockManualRotation")}}
            <fieldset class="v-group">
              <legend>Manual Rotation</legend>
              <div class="v-field">
                <label>
                  <input type="checkbox" data-config="lock" data-type="boolean" {{#if node.config.lock}}checked{{/if}}>
                  Lock manual rotation
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- CROSSHAIR LOCK DRAG (child) --}}
          {{#if (eq node.type "crosshairLockDrag")}}
            <fieldset class="v-group">
              <legend>Lock Drag</legend>
              <div class="v-field">
                <label>
                  <input type="checkbox" data-config="lock" data-type="boolean" {{#if node.config.lock}}checked{{/if}}>
                  Prevent drag movement
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- CROSSHAIR ICON (child) --}}
          {{#if (eq node.type "crosshairIcon")}}
            <fieldset class="v-group">
              <legend>Icon</legend>
              <div class="v-field">
                <label>Icon path
                  <input type="text" data-config="icon" value="{{node.config.icon}}">
                </label>
              </div>
              <div class="v-field">
                <label>
                  <input type="checkbox" data-config="borderVisible" data-type="boolean" {{#if node.config.borderVisible}}checked{{/if}}>
                  Show icon border
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- CROSSHAIR BORDER COLOR (child) --}}
          {{#if (eq node.type "crosshairBorderColor")}}
            <fieldset class="v-group">
              <legend>Border Color</legend>
              <div class="v-field">
                <label>Color
                  <input type="text" data-config="color" value="{{node.config.color}}">
                </label>
              </div>
              <div class="v-field">
                <label>Alpha
                  <input type="number" step="0.05" min="0" max="1" data-config="alpha" data-type="number" value="{{node.config.alpha}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- CROSSHAIR FILL COLOR (child) --}}
          {{#if (eq node.type "crosshairFillColor")}}
            <fieldset class="v-group">
              <legend>Fill Color</legend>
              <div class="v-field">
                <label>Color
                  <input type="text" data-config="color" value="{{node.config.color}}">
                </label>
              </div>
              <div class="v-field">
                <label>Alpha
                  <input type="number" step="0.05" min="0" max="1" data-config="alpha" data-type="number" value="{{node.config.alpha}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- CROSSHAIR TEXTURE (child) --}}
          {{#if (eq node.type "crosshairTexture")}}
            <fieldset class="v-group">
              <legend>Texture</legend>
              <div class="v-field">
                <label>Texture path
                  <input type="text" data-config="texture" value="{{node.config.texture}}">
                </label>
              </div>
              <div class="v-field grid-2">
                <label>Alpha
                  <input type="number" step="0.05" min="0" max="1" data-config="alpha" data-type="number" value="{{node.config.alpha}}">
                </label>
                <label>Scale
                  <input type="number" step="0.1" data-config="scale" data-type="number" value="{{node.config.scale}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- CROSSHAIR LOCATION (child) --}}
          {{#if (eq node.type "crosshairLocation")}}
            <fieldset class="v-group">
              <legend>Crosshair Source</legend>
              <div class="v-field">
                <label>Mode
                  <select data-config="mode">
                    <option value="selected-token"  {{#if (eq node.config.mode "selected-token")}}selected{{/if}}>Token seleccionado</option>
                    <option value="selected-target" {{#if (eq node.config.mode "selected-target")}}selected{{/if}}>Objetivo seleccionado</option>
                    <option value="token-id"        {{#if (eq node.config.mode "token-id")}}selected{{/if}}>Token por ID</option>
                    <option value="token-name"      {{#if (eq node.config.mode "token-name")}}selected{{/if}}>Token por nombre</option>
                    <option value="tile-id"         {{#if (eq node.config.mode "tile-id")}}selected{{/if}}>Tile por ID</option>
                    <option value="stored-name"     {{#if (eq node.config.mode "stored-name")}}selected{{/if}}>Nombre almacenado</option>
                    <option value="point"           {{#if (eq node.config.mode "point")}}selected{{/if}}>Coordenadas</option>
                  </select>
                </label>
              </div>
              <div class="v-field">
                <label>Stored name
                  <input type="text" data-config="storedName" value="{{node.config.storedName}}">
                </label>
              </div>
              <div class="v-field grid-2">
                <label>Token ID
                  <input type="text" data-config="tokenId" value="{{node.config.tokenId}}">
                </label>
                <label>Token name
                  <input type="text" data-config="tokenName" value="{{node.config.tokenName}}">
                </label>
              </div>
              <div class="v-field">
                <label>Tile ID
                  <input type="text" data-config="tileId" value="{{node.config.tileId}}">
                </label>
              </div>
              <div class="v-field grid-2">
                <label>X
                  <input type="number" data-config="x" data-type="number" value="{{node.config.x}}">
                </label>
                <label>Y
                  <input type="number" data-config="y" data-type="number" value="{{node.config.y}}">
                </label>
              </div>
              <div class="v-field grid-2">
                <label>Min range
                  <input type="number" data-config="limitMinRange" data-type="number" value="{{node.config.limitMinRange}}">
                </label>
                <label>Max range
                  <input type="number" data-config="limitMaxRange" data-type="number" value="{{node.config.limitMaxRange}}">
                </label>
              </div>
              <div class="v-field">
                <label>
                  <input type="checkbox" data-config="showRange" data-type="boolean" {{#if node.config.showRange}}checked{{/if}}>
                  Mostrar rango en HUD
                </label>
              </div>
              <div class="v-field">
                <label>
                  <input type="checkbox" data-config="lockToEdge" data-type="boolean" {{#if node.config.lockToEdge}}checked{{/if}}>
                  Bloquear al borde del objetivo
                </label>
              </div>
              <div class="v-field">
                <label>
                  <input type="checkbox" data-config="lockToEdgeDirection" data-type="boolean" {{#if node.config.lockToEdgeDirection}}checked{{/if}}>
                  Usar normal del borde
                </label>
              </div>
              <div class="v-field grid-2">
                <label>Offset X
                  <input type="number" data-config="offsetX" data-type="number" value="{{node.config.offsetX}}">
                </label>
                <label>Offset Y
                  <input type="number" data-config="offsetY" data-type="number" value="{{node.config.offsetY}}">
                </label>
              </div>
              <div class="v-field">
                <label>Wall behavior
                  <input type="text" data-config="wallBehavior" value="{{node.config.wallBehavior}}">
                </label>
              </div>
              <div class="v-field">
                <label>
                  <input type="checkbox" data-config="displayRangePoly" data-type="boolean" {{#if node.config.displayRangePoly}}checked{{/if}}>
                  Mostrar polígono de rango
                </label>
              </div>
              <div class="v-field grid-2">
                <label>Relleno
                  <input type="text" data-config="rangePolyFillColor" value="{{node.config.rangePolyFillColor}}">
                </label>
                <label>Borde
                  <input type="text" data-config="rangePolyLineColor" value="{{node.config.rangePolyLineColor}}">
                </label>
              </div>
              <div class="v-field grid-2">
                <label>Alpha relleno
                  <input type="number" step="0.05" min="0" max="1" data-config="rangePolyFillAlpha" data-type="number" value="{{node.config.rangePolyFillAlpha}}">
                </label>
                <label>Alpha borde
                  <input type="number" step="0.05" min="0" max="1" data-config="rangePolyLineAlpha" data-type="number" value="{{node.config.rangePolyLineAlpha}}">
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- CROSSHAIR PERSIST (child) --}}
          {{#if (eq node.type "crosshairPersist")}}
            <fieldset class="v-group">
              <legend>Persist</legend>
              <div class="v-field">
                <label>
                  <input type="checkbox" data-config="persist" data-type="boolean" {{#if node.config.persist}}checked{{/if}}>
                  Spawn measured template
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- CROSSHAIR GRID HIGHLIGHT (child) --}}
          {{#if (eq node.type "crosshairGridHighlight")}}
            <fieldset class="v-group">
              <legend>Grid Highlight</legend>
              <div class="v-field">
                <label>
                  <input type="checkbox" data-config="highlight" data-type="boolean" {{#if node.config.highlight}}checked{{/if}}>
                  Highlight grid
                </label>
              </div>
            </fieldset>
          {{/if}}

          {{!-- CROSSHAIR CALLBACK (child) --}}
          {{#if (eq node.type "crosshairCallback")}}
            <fieldset class="v-group">
              <legend>Crosshair Callback</legend>
              <div class="v-field">
                <label>Hook constant/expression
                  <input type="text" data-config="hook" value="{{node.config.hook}}">
                </label>
              </div>
              <div class="v-field">
                <label>Callback body
                  <textarea data-config="body" rows="4">{{node.config.body}}</textarea>
                </label>
              </div>
            </fieldset>
          {{/if}}

        </div>
      </div>
    {{/each}}
  </section>
</div>
